<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>LIBERT√â | LIB_DR04 ‚Äî Du droit abstrait au geste concret</title>
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Montserrat:wght@400;600;700&family=Share+Tech+Mono&display=swap');
:root{--bg:#0f172a;--acc:#6366f1;--acc-d:#4338ca;--text:#f8fafc;--muted:#94a3b8;--border:#334155}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Montserrat',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;
  display:flex;justify-content:center;align-items:flex-start;padding:32px 16px 60px}
body::before{content:'';position:fixed;inset:0;pointer-events:none;z-index:0;
  background:radial-gradient(ellipse at 50% 0%,rgba(99,102,241,0.11) 0%,transparent 55%)}
#root{width:100%;max-width:820px;position:relative;z-index:1}
.card{background:rgba(15,23,42,0.92);border:2px solid var(--acc);padding:36px 40px;border-radius:6px;
  box-shadow:0 0 50px rgba(0,0,0,0.7);backdrop-filter:blur(10px);position:relative;overflow:hidden}
.card::before{content:'LIBERT√â';position:absolute;top:-20px;right:-10px;font-family:'Playfair Display';
  font-size:4.5rem;opacity:0.04;transform:rotate(-12deg);color:var(--acc);pointer-events:none}
h1,h2{font-family:'Playfair Display',serif;color:var(--acc);text-align:center;margin-bottom:14px}
h1{font-size:1.55rem}h2{font-size:1.2rem}
p{line-height:1.75;margin-bottom:12px;color:#d8e8f8}
.quote{font-style:italic;color:var(--muted);border-left:3px solid var(--acc);
  padding-left:14px;margin-bottom:18px;line-height:1.7}
.tag{font-size:0.65rem;color:var(--muted);text-transform:uppercase;letter-spacing:1.5px;
  font-family:'Share Tech Mono',monospace;margin-bottom:12px;text-align:center}
.xp-badge{display:inline-flex;align-items:center;gap:6px;background:rgba(255,215,0,0.08);
  border:1px solid rgba(255,215,0,0.25);padding:4px 12px;border-radius:20px;
  font-size:0.7rem;color:#ffd700;font-family:'Share Tech Mono',monospace}
.player-chip{display:inline-flex;align-items:center;gap:6px;
  background:rgba(255,255,255,0.04);border:1px solid var(--border);
  padding:4px 12px;border-radius:20px;font-size:0.68rem;color:var(--muted);
  font-family:'Share Tech Mono',monospace}
.btn{background:var(--acc);color:#000;border:none;padding:13px 28px;font-weight:700;
  text-transform:uppercase;letter-spacing:.5px;cursor:pointer;transition:.25s;
  display:block;margin:18px auto 0;border-radius:4px;font-family:'Montserrat',sans-serif}
.btn:hover{filter:brightness(1.12);transform:translateY(-2px)}
.progress{height:3px;background:rgba(255,255,255,0.07);margin-bottom:24px;border-radius:2px;overflow:hidden}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--acc-d),var(--acc));
  border-radius:2px;transition:width .5s ease}
.step-tag{font-family:'Share Tech Mono',monospace;font-size:0.62rem;color:var(--muted);
  text-transform:uppercase;letter-spacing:1px;margin-bottom:10px}
.opt{display:block;width:100%;text-align:left;background:rgba(255,255,255,0.04);
  border:1px solid rgba(255,255,255,0.1);color:var(--text);padding:16px 18px;margin:10px 0;
  cursor:pointer;transition:.22s;border-radius:4px;font-size:0.88rem;line-height:1.5;
  font-family:'Montserrat',sans-serif}
.opt:hover{background:rgba(255,255,255,0.09);border-color:var(--acc)}
.summary-box{background:rgba(255,255,255,0.03);border-left:3px solid var(--acc);
  padding:16px 18px;margin:16px 0;line-height:1.75}
.summary-box p{margin-bottom:8px;font-size:0.85rem;color:#c0d4e8}
.token-box{background:#000;color:var(--acc);font-family:'Share Tech Mono',monospace;
  padding:16px;border:1px dashed var(--acc);word-break:break-all;margin:18px 0;
  font-size:0.8rem;border-radius:3px;cursor:text;user-select:all;line-height:1.6}
.token-note{font-size:0.72rem;color:var(--muted);line-height:1.65;margin-top:4px}
.seal{text-align:center;font-size:2.8rem;margin:14px 0}
.nav-back{background:rgba(255,255,255,0.05);border:1px solid var(--border);
  color:var(--muted);padding:6px 12px;cursor:pointer;border-radius:3px;
  font-size:0.7rem;font-family:'Montserrat',sans-serif;font-weight:600;transition:.2s;margin-bottom:18px}
.nav-back:hover{background:rgba(255,255,255,0.09);color:#fff}
.top-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
</style></head>
<body><div id="root"></div>
<script>
const e = React.createElement;
const MODULE_ID = 'LIB_DR04';
const CERT_KEY  = 'CERT_LIBERTE_DR4';
const XP_AMOUNT = 75;
const BACK_URL  = 'index_PIX_LIBERTE.html';
const CERT_KEYS = ["CERT_LIBERTE_DR1", "CERT_LIBERTE_DR2", "CERT_LIBERTE_DR3", "CERT_LIBERTE_DR4", "CERT_LIBERTE_EX1", "CERT_LIBERTE_EX2", "CERT_LIBERTE_EX3", "CERT_LIBERTE_EX4", "CERT_LIBERTE_EC1", "CERT_LIBERTE_EC2", "CERT_LIBERTE_EC3", "CERT_LIBERTE_EC4", "CERT_LIBERTE_EC5"];
const QUESTIONS = [{"q": "La DDHC, la Convention europ√©enne des droits de l'homme (1950) et la Convention internationale des droits de l'enfant (1989) forment ensemble...", "a": ["Trois textes redondants qui disent la m√™me chose", "Un corpus compl√©mentaire : la DDHC pose les bases fran√ßaises, la CEDH cr√©e une juridiction europ√©enne, la CIDE prot√®ge sp√©cifiquement les mineurs", "Des textes sans valeur juridique car non sign√©s par la France", "Un seul texte appel√© diff√©remment selon les √©poques"], "c": 1, "wrong": "Chacun est compl√©mentaire. La CIDE (droits de l'enfant) a √©t√© ratifi√©e par la France en 1990. La CEDH cr√©e la Cour europ√©enne √† Strasbourg, comp√©tente m√™me contre la France."}, {"q": "Si tu estimes qu'une d√©cision de ton √©tablissement viole tes droits fondamentaux, quelle est la voie la plus l√©gitime en premier recours ?", "a": ["Publier une vid√©o de d√©nonciation sur les r√©seaux", "En parler au d√©l√©gu√© ‚Üí au conseil de vie coll√©gienne ‚Üí √† la direction, en vous appuyant sur les textes pr√©cis", "Contacter directement un avocat", "Ignorer et attendre que la situation se r√©solve d'elle-m√™me"], "c": 1, "wrong": "Les voies institutionnelles d'abord ‚Äî elles ont l'avantage d'√™tre l√©gitimes et tra√ßables. Les r√©seaux sociaux peuvent venir apr√®s si les voies normales √©chouent."}, {"q": "La Convention internationale des droits de l'enfant (CIDE) dit que tout enfant a le droit d'√™tre entendu dans toute proc√©dure le concernant. En contexte scolaire, cela signifie...", "a": ["Que l'enfant peut d√©cider lui-m√™me de ses sanctions", "Que son avis doit √™tre recueilli et consid√©r√© avant toute d√©cision importante qui le concerne", "Que les parents peuvent bloquer n'importe quelle d√©cision de l'√©tablissement", "Que ce droit s'applique uniquement devant les tribunaux"], "c": 1, "wrong": "La CIDE Art. 12 : recueillir l'avis de l'enfant. Pas le droit de veto ‚Äî mais le droit d'√™tre entendu. Applicable d√®s le conseil de classe."}];
const SCENARIO  = {"title": "Le t√©moin actif", "p": "Tu vois un camarade subir une injustice manifeste (punition collective, humiliation publique). Il n'ose rien dire. Que fais-tu, toi ?", "options": [{"text": "En tant que d√©l√©gu√©, je recueille les faits pr√©cis√©ment, j'informe mon camarade de ses droits, et je porte le sujet au conseil de classe ou directement √† la direction avec les r√©f√©rences l√©gales pr√©cises. Je n'accuse pas ‚Äî j'expose les faits et les droits applicables.", "ok": true, "fb": ""}, {"text": "Ce n'est pas mon probl√®me s'il ne r√©agit pas lui-m√™me.", "ok": false, "fb": "Camus a raison : si tu n'interviens pas quand l'autre est opprim√©, tu es simplement en attente de ton tour. La citoyennet√© active, c'est agir m√™me pour les autres."}, {"text": "Je poste sur les r√©seaux pour cr√©er de la pression publique.", "ok": false, "fb": "Premi√®re √©tape : voies internes. La pression publique peut amplifier, mais sans la base institutionnelle, elle est souvent contre-productive et peut aggraver la situation."}]};
const SYNTHESIS = [{"icon": "üìö", "t": "Le corpus :", "v": "DDHC (1789) + CEDH (1950) + CIDE (1989) = trois couches compl√©mentaires de protection."}, {"icon": "üó∫Ô∏è", "t": "La voie :", "v": "D√©l√©gu√© ‚Üí CVC ‚Üí Direction ‚Üí Acad√©mie ‚Üí Cour europ√©enne (si tout √©choue). Chaque niveau compte."}, {"icon": "üëÇ", "t": "CIDE Art. 12 :", "v": "Tout enfant a le droit d'√™tre entendu dans les proc√©dures qui le concernent."}, {"icon": "üåü", "t": "Le citoyen actif :", "v": "Conna√Ætre ses droits est insuffisant. Les exercer pour soi et d√©fendre ceux des autres ‚Äî c'est √ßa, la libert√© vivante."}];

function getPlayer(){return localStorage.getItem('pvs_current_player')||'anonyme';}

function countCerts(){
  let n=0;
  CERT_KEYS.forEach(k=>{try{if(localStorage.getItem(k))n++;}catch(ex){}}); 
  return n;
}

function awardXP(){
  try{
    const raw=localStorage.getItem('pvs_bridge_events');
    const evts=raw?JSON.parse(raw):[];
    evts.push({
      id:'LIB-'+MODULE_ID+'-'+Date.now(),
      type:'LIBERTE_PROGRESS',
      player:getPlayer(),
      module:MODULE_ID,
      cpTotal:countCerts(),
      label:'LIBERT√â : Du droit abstrait au geste concret',
      d:new Date().toISOString()
    });
    if(evts.length>700)evts.splice(0,evts.length-700);
    localStorage.setItem('pvs_bridge_events',JSON.stringify(evts));
    window.dispatchEvent(new StorageEvent('storage',{key:'pvs_bridge_events'}));
  }catch(ex){}
}

function App(){
  const [step,setStep]=React.useState('intro');
  const [qIdx,setQIdx]=React.useState(0);
  const [token,setToken]=React.useState('');

  const finish=()=>{
    const cert={v:2,d:new Date().toISOString(),m:MODULE_ID,n:getPlayer(),f:true};
    localStorage.setItem(CERT_KEY,JSON.stringify(cert));
    awardXP();
    setToken(btoa(unescape(encodeURIComponent(JSON.stringify(cert)))));
    setStep('complete');
  };

  const goBack=()=>{window.location.href=BACK_URL;};

  const PlayerChip=()=>e('div',{className:'player-chip'},'üéÆ ',getPlayer());

  const renderIntro=()=>e('div',{className:'card'},
    e('div',{className:'top-row'},
      e('button',{className:'nav-back',onClick:goBack},'‚Üê Libert√©'),
      PlayerChip()
    ),
    e('div',{className:'tag'},'Droits ¬∑ Module 4/4 ‚ú¶ CERTIFICATION'),
    
    e('h1',null,"Du droit abstrait au geste concret"),
    e('p',{className:'quote'},"¬´¬†Il suffit qu'un seul homme soit opprim√© injustement pour que tous les hommes soient menac√©s.¬†¬ª ‚Äî Albert Camus"),
    e('p',null,"Conna√Ætre ses droits, c'est bien. Les exercer, c'est mieux. Les d√©fendre pour les autres, c'est ce qui fait la diff√©rence entre un spectateur et un citoyen actif."),
    e('p',null,"Ce module de certification v√©rifie que tu sais non seulement citer des droits, mais comprendre comment ils s'articulent, et comment agir concr√®tement quand ils sont viol√©s ‚Äî pour toi ou pour quelqu'un d'autre."),
,
    e('div',{style:{textAlign:'center'}},
      e('div',{className:'xp-badge'},'‚ö° +75 XP √† la cl√©')),
    e('button',{className:'btn',onClick:()=>setStep('quiz')},'Finaliser le pilier')
  );

  const renderQuiz=()=>{
    const q=QUESTIONS[qIdx];
    const pct=25+Math.round((qIdx/QUESTIONS.length)*30);
    return e('div',{className:'card'},
      e('div',{className:'progress'},e('div',{className:'progress-fill',style:{width:pct+'%'}})),
      e('div',{className:'step-tag'},'Question '+(qIdx+1)+' / '+QUESTIONS.length),
      e('h2',null,q.q),
      q.a.map((opt,i)=>e('button',{
        key:i,className:'opt',
        onClick:()=>{
          if(i===q.c){if(qIdx<QUESTIONS.length-1)setQIdx(qIdx+1);else setStep('scenario');}
          else alert(q.wrong||'La certification demande de la pr√©cision. R√©essaie.');
        }
      },opt))
    );
  };

  const renderScenario=()=>e('div',{className:'card'},
    e('div',{className:'progress'},e('div',{className:'progress-fill',style:{width:'70%'}})),
    e('div',{className:'step-tag'},'Mise en situation'),
    e('h2',null,SCENARIO.title),
    e('p',null,SCENARIO.p),
    SCENARIO.options.map((opt,i)=>e('button',{
      key:i,className:'opt',
      onClick:()=>{if(opt.ok)setStep('synthesis');else alert(opt.fb);}
    },opt.text))
  );

  const renderSynthesis=()=>e('div',{className:'card'},
    e('div',{className:'progress'},e('div',{className:'progress-fill',style:{width:'88%'}})),
    e('div',{className:'step-tag'},'Synth√®se'),
    e('h2',null,'Ce qu'il faut retenir'),
    e('div',{className:'summary-box'},
      SYNTHESIS.map((s,i)=>e('p',{key:i},e('strong',null,s.icon+' '+s.t+' '),s.v))
    ),
    e('button',{className:'btn',onClick:finish},'Valider ce module ‚Üí')
  );

  const renderComplete=()=>e('div',{className:'card'},
    e('div',{className:'seal'},'üèõÔ∏è'),
    e('h1',null,'Pilier Droits ‚Äî Valid√© !'),
    e('p',{style:{textAlign:'center'}},'Tu es d√©sormais un garant des droits, pas juste un b√©n√©ficiaire.'),
    e('div',{style:{textAlign:'center',margin:'8px 0'}},
      e('div',{className:'xp-badge'},'‚ö° +75 XP envoy√©s au Portail')),
    e('p',{style:{textAlign:'center',color:'var(--muted)',fontSize:'.8rem',marginTop:'10px'}},
      'Copie le jeton ci-dessous et colle-le dans le Hub Libert√© si demand√©.'),
    e('div',{className:'token-box'},token),
    e('p',{className:'token-note'},'üìã S√©lectionne tout le code (clic) ‚Äî Ctrl+C / Cmd+C.'),
    e('button',{className:'btn',onClick:goBack},'‚Üê Retour au Hub Libert√©')
  );

  switch(step){
    case 'intro':     return renderIntro();
    case 'quiz':      return renderQuiz();
    case 'scenario':  return renderScenario();
    case 'synthesis': return renderSynthesis();
    case 'complete':  return renderComplete();
    default:          return renderIntro();
  }
}

ReactDOM.createRoot(document.getElementById('root')).render(e(App));
</script></body></html>
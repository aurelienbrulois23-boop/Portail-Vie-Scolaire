<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Hub LIBERTÃ‰ â€” Portail Vie Scolaire</title>
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Montserrat:wght@400;600;700&family=Orbitron:wght@700&family=Share+Tech+Mono&display=swap');
:root{--bg:#080f1e;--text:#f8fafc;--muted:#94a3b8;--border:#1e293b}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Montserrat',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;padding:0 0 80px}
.hero{position:relative;overflow:hidden;padding:64px 24px 56px;text-align:center;
  background:linear-gradient(180deg,#0b1740 0%,#080f1e 100%)}
.hero::before{content:'LIBERTÃ‰';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
  font-family:'Playfair Display';font-size:clamp(5rem,18vw,14rem);opacity:0.04;
  color:#fff;pointer-events:none;white-space:nowrap}
.hero-stars{position:absolute;inset:0;background:
  radial-gradient(1px 1px at 20% 30%,#ffffff44,transparent),
  radial-gradient(1px 1px at 70% 15%,#ffffff33,transparent),
  radial-gradient(1px 1px at 40% 70%,#ffffff22,transparent),
  radial-gradient(1px 1px at 85% 55%,#ffffff44,transparent);pointer-events:none}
.flag-strip{display:flex;height:5px;border-radius:3px;overflow:hidden;width:120px;margin:0 auto 24px}
.flag-strip div{flex:1}
.f-b{background:#002395}.f-w{background:#fff}.f-r{background:#ED2939}
h1{font-family:'Playfair Display';font-size:clamp(2rem,6vw,3.2rem);margin-bottom:8px;
  background:linear-gradient(135deg,#e2e8f0,#cbd5e1);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero-sub{color:var(--muted);font-size:.95rem;max-width:560px;margin:0 auto 28px;line-height:1.7}
.player-chip{display:inline-flex;align-items:center;gap:6px;
  background:rgba(255,255,255,0.04);border:1px solid var(--border);
  padding:5px 14px;border-radius:20px;font-size:.7rem;color:var(--muted);
  font-family:'Share Tech Mono',monospace;margin-bottom:20px}
.xp-total{display:inline-flex;align-items:center;gap:8px;
  background:rgba(255,215,0,0.06);border:1px solid rgba(255,215,0,0.2);
  padding:8px 20px;border-radius:24px;font-family:'Share Tech Mono';
  font-size:.78rem;color:#ffd700;margin-bottom:8px}
.nav-back{background:rgba(255,255,255,0.05);border:1px solid var(--border);
  color:var(--muted);padding:6px 16px;cursor:pointer;border-radius:3px;
  font-size:.72rem;font-family:'Montserrat';font-weight:600;transition:.2s;
  position:absolute;top:20px;left:20px}
.nav-back:hover{background:rgba(255,255,255,0.1);color:#fff}
.wrap{max-width:1120px;margin:0 auto;padding:40px 20px 0}
.pillar{margin-bottom:50px}
.pillar-header{display:flex;align-items:center;gap:14px;margin-bottom:20px;
  padding-bottom:14px;border-bottom:1px solid var(--border)}
.pillar-icon{font-size:1.8rem}
.pillar-title{font-family:'Playfair Display';font-size:1.4rem}
.pillar-count{font-family:'Share Tech Mono';font-size:.7rem;color:var(--muted);margin-top:2px}
.mods-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:14px}
.mod-card{border-radius:8px;padding:20px;cursor:pointer;transition:.22s;
  border:1px solid rgba(255,255,255,0.08);position:relative;overflow:hidden}
.mod-card:hover{transform:translateY(-3px);box-shadow:0 12px 30px rgba(0,0,0,0.5)}
.mod-card.done{cursor:default}
.mod-card.done::after{content:'âœ“';position:absolute;top:12px;right:12px;
  width:26px;height:26px;border-radius:50%;background:rgba(0,200,100,0.15);
  border:1px solid rgba(0,200,100,0.4);color:#4ade80;font-size:.85rem;
  display:flex;align-items:center;justify-content:center;line-height:26px;text-align:center}
.mod-num{font-family:'Share Tech Mono';font-size:.62rem;color:var(--muted);margin-bottom:6px}
.mod-title{font-weight:700;font-size:.88rem;line-height:1.45;margin-bottom:8px}
.mod-xp{font-family:'Share Tech Mono';font-size:.68rem;margin-top:8px}
.cert-badge{display:inline-block;font-size:.6rem;font-family:'Share Tech Mono';
  padding:2px 7px;border-radius:10px;margin-bottom:6px}
.progress-bar-wrap{background:rgba(255,255,255,0.05);border-radius:3px;
  height:4px;margin:6px 0 4px;overflow:hidden}
.progress-bar-fill{height:100%;border-radius:3px;transition:width .5s ease}
.progress-label{font-size:.65rem;color:var(--muted);font-family:'Share Tech Mono'}
.footer-note{text-align:center;color:var(--muted);font-size:.72rem;
  font-family:'Share Tech Mono';padding:30px 20px 0;line-height:1.8}
@media(max-width:600px){.mods-grid{grid-template-columns:1fr}}
</style>
</head>
<body>
<div id="root"></div>
<script>
const e = React.createElement;

// â”€â”€ DonnÃ©es modules â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const PILLARS = [
  {
    id: 'droits', icon: 'ðŸ›ï¸', title: 'Droits', color: '#6366f1', glow: 'rgba(99,102,241,0.12)',
    desc: 'Les droits fondamentaux â€” textes, histoire, exercice concret',
    modules: [
      {id:'LIB_DR01', file:'LIB_DR01.html', ckey:'CERT_LIBERTE_DR1', xp:50,
       title:'La DDHC : le texte qui a tout changÃ©', cert:false},
      {id:'LIB_DR02', file:'LIB_DR02.html', ckey:'CERT_LIBERTE_DR2', xp:50,
       title:'Tes droits en tant qu\'Ã©lÃ¨ve', cert:false},
      {id:'LIB_DR03', file:'LIB_DR03.html', ckey:'CERT_LIBERTE_DR3', xp:50,
       title:'Droits et devoirs : les deux faces', cert:false},
      {id:'LIB_DR04', file:'LIB_DR04.html', ckey:'CERT_LIBERTE_DR4', xp:75,
       title:'Du droit abstrait au geste concret', cert:true},
    ]
  },
  {
    id: 'expression', icon: 'ðŸ“¢', title: 'Expression', color: '#ec4899', glow: 'rgba(236,72,153,0.12)',
    desc: 'LibertÃ© d\'expression â€” fondements, limites, presse, numÃ©rique',
    modules: [
      {id:'LIB_EX01', file:'LIB_EX01.html', ckey:'CERT_LIBERTE_EX1', xp:50,
       title:'La libertÃ© d\'expression : origines et fondements', cert:false},
      {id:'LIB_EX02', file:'LIB_EX02.html', ckey:'CERT_LIBERTE_EX2', xp:50,
       title:'Les limites lÃ©gales de l\'expression', cert:false},
      {id:'LIB_EX03', file:'LIB_EX03.html', ckey:'CERT_LIBERTE_EX3', xp:50,
       title:'Presse, journalistes et libertÃ© d\'informer', cert:false},
      {id:'LIB_EX04', file:'LIB_EX04.html', ckey:'CERT_LIBERTE_EX4', xp:75,
       title:'Toi en ligne : droits, risques, responsabilitÃ©s', cert:true},
    ]
  },
  {
    id: 'critique', icon: 'ðŸ§ ', title: 'Esprit Critique', color: '#10b981', glow: 'rgba(16,185,129,0.12)',
    desc: 'Info, mÃ©dias, fake news, algorithmes â€” penser par soi-mÃªme',
    modules: [
      {id:'LIB_EC01', file:'LIB_EC01.html', ckey:'CERT_LIBERTE_EC1', xp:50,
       title:'Fake news : pourquoi Ã§a marche ?', cert:false},
      {id:'LIB_EC02', file:'LIB_EC02.html', ckey:'CERT_LIBERTE_EC2', xp:50,
       title:'VÃ©rifier une info : la mÃ©thode PISTE', cert:false},
      {id:'LIB_EC03', file:'LIB_EC03.html', ckey:'CERT_LIBERTE_EC3', xp:50,
       title:'Algorithmes et bulles de filtre', cert:false},
      {id:'LIB_EC04', file:'LIB_EC04.html', ckey:'CERT_LIBERTE_EC4', xp:50,
       title:'RÃ©seaux sociaux : amplificateurs ou dÃ©formateurs ?', cert:false},
      {id:'LIB_EC05', file:'LIB_EC05.html', ckey:'CERT_LIBERTE_EC5', xp:75,
       title:'Tu es un citoyen numÃ©rique â€” agis comme tel', cert:true},
    ]
  }
];

const TOTAL_XP = PILLARS.reduce((a,p)=>a+p.modules.reduce((b,m)=>b+m.xp,0),0);

function isDone(ckey){
  try{ return !!localStorage.getItem(ckey); }catch(ex){ return false; }
}

function getPlayer(){
  return localStorage.getItem('pvs_current_player')||'anonyme';
}

function earnedXP(){
  let xp=0;
  PILLARS.forEach(p=>p.modules.forEach(m=>{
    if(isDone(m.ckey)) xp+=m.xp;
  }));
  return xp;
}

function pillarProgress(pillar){
  const done = pillar.modules.filter(m=>isDone(m.ckey)).length;
  return {done, total: pillar.modules.length, pct: Math.round(done/pillar.modules.length*100)};
}

// â”€â”€ Composant principal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function Hub(){
  const [tick, setTick] = React.useState(0);

  const refresh = ()=> setTick(t=>t+1);

  const goModule = (file)=>{
    window.location.href = file;
  };

  const xp = earnedXP();
  const player = getPlayer();

  const renderPillar = (pillar)=>{
    const prog = pillarProgress(pillar);

    return e('div', {key:pillar.id, className:'pillar'},
      e('div', {className:'pillar-header'},
        e('div', {className:'pillar-icon'}, pillar.icon),
        e('div', null,
          e('div', {className:'pillar-title', style:{color:pillar.color}}, pillar.title),
          e('div', {className:'pillar-count'},
            prog.done + ' / ' + prog.total + ' modules â€” ' +
            pillar.modules.reduce((a,m)=>a+m.xp,0) + ' XP disponibles'
          )
        )
      ),
      e('div', {className:'progress-bar-wrap', style:{marginBottom:'16px'}},
        e('div', {className:'progress-bar-fill',
          style:{width:prog.pct+'%', background:`linear-gradient(90deg,${pillar.color}88,${pillar.color})`}})
      ),
      e('div', {className:'mods-grid'},
        pillar.modules.map((mod, idx)=>{
          const done = isDone(mod.ckey);
          return e('div', {
            key: mod.id,
            className: 'mod-card' + (done?' done':''),
            style: {
              background: done
                ? `linear-gradient(135deg,${pillar.glow.replace('0.12','0.18')},rgba(0,200,80,0.05))`
                : `linear-gradient(135deg,${pillar.glow},rgba(255,255,255,0.02))`,
              borderColor: done ? 'rgba(74,222,128,0.3)' : `${pillar.color}40`,
            },
            onClick: ()=>{ if(!done) goModule(mod.file); }
          },
          mod.cert && e('div', {className:'cert-badge',
            style:{background:`${pillar.color}22`,border:`1px solid ${pillar.color}55`,color:pillar.color}},
            'âœ¦ CERTIFICATION'),
          e('div', {className:'mod-num'}, mod.id),
          e('div', {className:'mod-title', style:{color: done?'#86efac':'#f1f5f9'}}, mod.title),
          e('div', {className:'mod-xp', style:{color: done?'#4ade80':pillar.color}},
            done ? 'âœ“ ValidÃ© â€” +'+mod.xp+' XP encaissÃ©s' : 'âš¡ +'+mod.xp+' XP'
          )
          );
        })
      )
    );
  };

  return e('div', null,
    // â”€â”€ Hero â”€â”€
    e('div', {className:'hero'},
      e('button', {className:'nav-back', onClick:()=>{window.location.href='index.html';}},
        'â† Portail'),
      e('div', {className:'hero-stars'}),
      e('div', {className:'flag-strip'},
        e('div',{className:'f-b'}), e('div',{className:'f-w'}), e('div',{className:'f-r'})
      ),
      e('h1', null, 'Hub LibertÃ©'),
      e('p', {className:'hero-sub'},
        'Droits fondamentaux Â· LibertÃ© d\'expression Â· Esprit critique\u00a0â€” ' +
        'trois piliers pour comprendre et exercer ta libertÃ© de citoyen.'),
      e('div', {className:'player-chip'}, 'ðŸŽ® ', player),
      e('br'),
      e('div', {className:'xp-total'},
        'âš¡ ', xp, ' / ', TOTAL_XP, ' XP  Â·  ',
        PILLARS.reduce((a,p)=>a+p.modules.filter(m=>isDone(m.ckey)).length,0),
        ' / ', PILLARS.reduce((a,p)=>a+p.modules.length,0), ' modules validÃ©s'
      )
    ),

    // â”€â”€ Pilliers â”€â”€
    e('div', {className:'wrap'},
      PILLARS.map(renderPillar),
      e('div', {className:'footer-note'},
        'ðŸ“œ DDHC (1789) Â· CEDH (1950) Â· CIDE (1989) Â· RGPD (2018)',
        e('br'),
        'Hub LibertÃ© â€” Portail Vie Scolaire Â· CollÃ¨ge ChÃ¢teau Rance'
      )
    )
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(e(Hub));
</script>
</body>
</html>

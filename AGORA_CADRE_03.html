<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGORA | Module C03 - Droits & NeutralitÃ© [CERTIFICATION]</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Montserrat:wght@400;600;700&family=Share+Tech+Mono&display=swap');
        :root { --agora-blue:#0f172a; --agora-gold:#fbbf24; --agora-slate:#1e293b; --agora-green:#22c55e; --agora-red:#ef4444; --text-primary:#f8fafc; --text-muted:#94a3b8; }
        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family:'Montserrat',sans-serif; background:var(--agora-blue); color:var(--text-primary); min-height:100vh; display:flex; justify-content:center; align-items:flex-start; padding:20px 0 40px; }
        #root { width:100%; max-width:860px; padding:20px; }
        .card { background:rgba(15,23,42,0.97); border:2px solid var(--agora-gold); padding:40px; border-radius:6px; box-shadow:0 10px 40px rgba(0,0,0,0.7); position:relative; overflow:hidden; }
        .card::before { content:'C03'; position:absolute; top:-15px; right:-10px; font-family:'Playfair Display'; font-size:5rem; opacity:0.04; color:var(--agora-gold); transform:rotate(-10deg); }
        h1 { font-family:'Playfair Display',serif; color:var(--agora-gold); text-align:center; font-size:1.9rem; margin-bottom:8px; }
        h2 { font-family:'Playfair Display',serif; color:var(--agora-gold); font-size:1.4rem; margin-bottom:16px; }
        .badge { display:inline-block; padding:6px 18px; border:2px solid var(--agora-gold); color:var(--agora-gold); font-family:'Share Tech Mono',monospace; font-size:0.78rem; margin-bottom:24px; letter-spacing:1px; }
        .cert-badge { display:inline-block; padding:8px 22px; background:rgba(251,191,36,0.1); border:2px solid var(--agora-gold); color:var(--agora-gold); font-family:'Share Tech Mono',monospace; font-size:0.8rem; margin-bottom:20px; letter-spacing:2px; }
        .progress { display:flex; gap:10px; justify-content:center; margin-bottom:28px; }
        .step { width:44px; height:44px; border:2px solid #334155; border-radius:50%; display:flex; align-items:center; justify-content:center; font-family:'Share Tech Mono',monospace; font-size:0.85rem; color:#475569; transition:all 0.3s; }
        .step.active { border-color:var(--agora-gold); color:var(--agora-gold); box-shadow:0 0 12px rgba(251,191,36,0.4); }
        .step.done { border-color:var(--agora-green); color:var(--agora-green); background:rgba(34,197,94,0.1); }
        .lesson-block { background:rgba(251,191,36,0.04); border-left:3px solid var(--agora-gold); padding:18px 20px; margin-bottom:16px; border-radius:0 6px 6px 0; }
        .lesson-block h3 { color:var(--agora-gold); font-size:0.9rem; text-transform:uppercase; letter-spacing:1px; margin-bottom:10px; font-family:'Share Tech Mono',monospace; }
        .lesson-block p { line-height:1.75; color:var(--text-primary); font-size:0.95rem; margin-bottom:6px; }
        .lesson-block strong { color:var(--agora-gold); }
        .droit-item { display:flex; gap:12px; align-items:flex-start; margin-top:8px; padding:8px 12px; background:rgba(255,255,255,0.02); border-radius:4px; }
        .droit-icon { font-size:1.1rem; flex-shrink:0; margin-top:2px; }
        .droit-txt { font-size:0.9rem; line-height:1.6; color:var(--text-muted); }
        .droit-txt strong { color:var(--text-primary); }
        .attention-box { margin-top:12px; padding:12px 16px; background:rgba(239,68,68,0.06); border:1px solid rgba(239,68,68,0.3); border-radius:4px; font-size:0.88rem; color:#fca5a5; line-height:1.6; }
        .btn { background:var(--agora-gold); color:var(--agora-blue); border:none; padding:14px 32px; font-weight:700; text-transform:uppercase; cursor:pointer; transition:0.3s; display:block; margin:28px auto 0; font-family:'Montserrat',sans-serif; font-size:0.95rem; letter-spacing:1px; border-radius:2px; }
        .btn:hover { box-shadow:0 0 20px rgba(251,191,36,0.5); transform:translateY(-1px); }
        .quiz-q { font-size:1.05rem; font-weight:600; padding:16px; background:rgba(251,191,36,0.06); border-left:4px solid var(--agora-gold); border-radius:0 4px 4px 0; margin-bottom:18px; line-height:1.6; }
        .opt { display:block; width:100%; text-align:left; background:rgba(255,255,255,0.03); border:1px solid #334155; color:white; padding:16px 18px; margin:10px 0; cursor:pointer; transition:0.25s; border-radius:4px; font-family:'Montserrat',sans-serif; font-size:0.95rem; line-height:1.5; }
        .opt:hover:not(:disabled) { border-color:var(--agora-gold); background:rgba(251,191,36,0.06); transform:translateX(4px); }
        .opt.correct { border-color:var(--agora-green); background:rgba(34,197,94,0.1); }
        .opt.incorrect { border-color:var(--agora-red); background:rgba(239,68,68,0.1); }
        .opt:disabled { cursor:default; }
        .feedback { margin-top:16px; padding:14px 18px; border-radius:4px; line-height:1.65; font-size:0.93rem; }
        .feedback.ok { border-left:3px solid var(--agora-green); background:rgba(34,197,94,0.08); }
        .feedback.ko { border-left:3px solid var(--agora-red); background:rgba(239,68,68,0.08); }
        .feedback strong { color:var(--agora-gold); }
        .nav-row { display:flex; justify-content:center; gap:16px; margin-top:22px; }
        .btn-sm { background:transparent; border:2px solid var(--agora-gold); color:var(--agora-gold); padding:10px 24px; font-weight:700; text-transform:uppercase; cursor:pointer; transition:0.3s; font-family:'Montserrat',sans-serif; font-size:0.85rem; border-radius:2px; }
        .btn-sm:hover { background:rgba(251,191,36,0.1); }
        .scenario-ctx { background:rgba(251,191,36,0.05); border:1px dashed #475569; padding:14px 18px; border-radius:4px; font-style:italic; color:var(--text-muted); margin-bottom:16px; line-height:1.65; font-size:0.93rem; }
        .scenario-q { font-size:1.05rem; font-weight:600; margin-bottom:18px; line-height:1.6; }
        .token-box { background:#000; color:var(--agora-gold); font-family:'Share Tech Mono',monospace; padding:16px; border:1px dashed var(--agora-gold); word-break:break-all; margin:20px 0; font-size:0.78rem; }
        .score-row { display:flex; justify-content:center; gap:24px; margin:20px 0; }
        .score-val { font-family:'Share Tech Mono',monospace; font-size:1.6rem; color:var(--agora-gold); }
        .score-lbl { font-size:0.75rem; color:var(--text-muted); text-transform:uppercase; letter-spacing:1px; }
        .seal { font-size:4rem; text-align:center; margin:16px 0; }
        input[type=text] { width:100%; padding:13px 15px; background:#000; border:1px solid var(--agora-gold); color:#fff; font-family:'Montserrat',sans-serif; font-size:0.95rem; margin-bottom:12px; outline:none; }
        p.intro-txt { line-height:1.75; margin-bottom:14px; color:var(--text-primary); font-size:0.97rem; }
    </style>
</head>
<body><div id="root"></div>
<script>
const {useState} = React;
const e = React.createElement;
const MODULE_ID = "AG_C03";
const CERT_KEY = "CERT_CADRE_3";

const lessonBlocks = [
    {
        icon:"ðŸ”µ",
        title:"Les droits des Ã©lÃ¨ves â€” ce que tu peux faire",
        body:"Les Ã©lÃ¨ves ont des droits reconnus par les textes officiels de l'Ã‰ducation Nationale. En tant que dÃ©lÃ©guÃ©, tu dois les connaÃ®tre pour pouvoir les dÃ©fendre.",
        items:[
            { icon:"ðŸ’¬", title:"Droit d'expression", desc:"Les Ã©lÃ¨ves peuvent s'exprimer oralement et par Ã©crit, y compris dans des publications lycÃ©ennes (avec autorisation prÃ©alable du chef d'Ã©tablissement)." },
            { icon:"ðŸ¤", title:"Droit de rÃ©union", desc:"Les dÃ©lÃ©guÃ©s Ã©lÃ¨ves peuvent se rÃ©unir en dehors des cours, dans des locaux mis Ã  disposition, pour prÃ©parer les instances." },
            { icon:"ðŸ“‹", title:"Droit d'association", desc:"Les Ã©lÃ¨ves peuvent crÃ©er des associations dans l'Ã©tablissement, dans le respect du cadre rÃ©glementaire." }
        ],
        attention:null
    },
    {
        icon:"ðŸ”´",
        title:"Les limites â€” ce que tu ne peux pas faire",
        body:"Le droit d'expression a des limites prÃ©cises que tu dois connaÃ®tre, surtout dans ton rÃ´le de reprÃ©sentant.",
        items:[
            { icon:"â›”", title:"Pas de prosÃ©lytisme", desc:"Tu ne peux pas militer pour une religion, un parti politique ou une idÃ©ologie dans l'exercice de ton mandat." },
            { icon:"â›”", title:"Pas de diffamation", desc:"Toute publication ou propos qui porte atteinte Ã  la rÃ©putation d'un membre de la communautÃ© scolaire est sanctionnable." },
            { icon:"â›”", title:"Pas de perturbation", desc:"L'exercice du droit d'expression ne peut pas perturber le bon fonctionnement du service public d'Ã©ducation." }
        ],
        attention:"Attention : en tant que dÃ©lÃ©guÃ©, tu es visible. Si tu outrepasses ces limites, tu ne reprÃ©sentes plus ta classe â€” tu la compromets."
    },
    {
        icon:"âš–ï¸",
        title:"La laÃ¯citÃ© : la neutralitÃ© comme armure",
        body:"L'Ã©cole publique est laÃ¯que. Cela signifie que l'appartenance religieuse, politique ou communautaire ne doit pas s'exprimer dans l'espace scolaire, ni influencer les dÃ©cisions prises en instances.",
        items:[
            { icon:"ðŸŒ", title:"NeutralitÃ© religieuse", desc:"Un dÃ©lÃ©guÃ© ne plaide pas pour des menus ou des amÃ©nagements basÃ©s sur des convictions religieuses. Il peut en revanche dÃ©fendre le bien-Ãªtre de tous." },
            { icon:"ðŸŽ–", title:"NeutralitÃ© politique", desc:"Le dÃ©lÃ©guÃ© reprÃ©sente toute la classe, pas une tendance politique. Les slogans partisans n'ont pas leur place dans les instances." }
        ],
        attention:"La neutralitÃ© n'est pas l'indiffÃ©rence. Tu peux dÃ©fendre avec passion les intÃ©rÃªts de tes camarades â€” mais au nom de tous, pas au nom d'une partie."
    },
    {
        icon:"ðŸ…",
        title:"La neutralitÃ© : ta force, pas ta faiblesse",
        body:"Un dÃ©lÃ©guÃ© qui reste neutre est paradoxalement le plus puissant. Pourquoi ? Parce que tout le monde lui fait confiance. Un dÃ©lÃ©guÃ© partisan rassure ses amis mais perd les autres. Un dÃ©lÃ©guÃ© neutre peut parler Ã  tout le monde, y compris aux enseignants et aux administrateurs, sans Ãªtre soupÃ§onnÃ© d'agenda cachÃ©.",
        items:[],
        attention:null
    }
];

const quizData = [
    {
        q:"Un groupe d'Ã©lÃ¨ves veut lancer une pÃ©tition pour changer le menu de la cantine, en invoquant leurs convictions religieuses. Ils te demandent de la porter en instance. Que fais-tu ?",
        opts:[
            "Tu refuses catÃ©goriquement â€” c'est contraire Ã  la laÃ¯citÃ©.",
            "Tu leur expliques comment reformuler leur demande autour de critÃ¨res universels (variÃ©tÃ© des menus, allergies, Ã©quilibre nutritionnel) et tu portes cette version recadrÃ©e.",
            "Tu signes la pÃ©tition et tu la portes telle quelle â€” la libertÃ© de conscience prime."
        ],
        correct:1,
        feedback_ok:"Parfait. Tu n'interdis pas la demande, tu l'aides Ã  entrer dans le cadre laÃ¯que. C'est Ã§a, le travail du dÃ©lÃ©guÃ© : traduire les besoins particuliers en demandes universelles.",
        feedback_ko:"Ni refus total ni acceptation aveugle. Le rÃ´le du dÃ©lÃ©guÃ© est de reformuler pour que la demande puisse Ãªtre entendue dans le cadre de l'Ã©cole publique."
    },
    {
        q:"Un Ã©lÃ¨ve te demande si tu as le droit de publier un journal Ã©lÃ¨ve qui critique la direction de l'Ã©tablissement.",
        opts:[
            "Non, toute critique est interdite dans un Ã©tablissement scolaire.",
            "Oui, sous conditions : contenu factuel, pas de diffamation, autorisation prÃ©alable du chef d'Ã©tablissement selon le niveau.",
            "Oui, la libertÃ© de la presse s'applique totalement dans les Ã©tablissements scolaires."
        ],
        correct:1,
        feedback_ok:"Exact. Le droit d'expression existe mais est encadrÃ©. La critique respectueuse et factuelle est un droit ; la diffamation ou la dÃ©stabilisation gratuite est une faute.",
        feedback_ko:"La libertÃ© d'expression existe Ã  l'Ã©cole, mais elle n'est pas absolue. Elle s'exerce dans un cadre prÃ©cis qui protÃ¨ge aussi bien les Ã©lÃ¨ves que les adultes."
    }
];

const scenarioData = {
    ctx:"Lors du Conseil de Discipline d'un Ã©lÃ¨ve, tu siÃ©ges comme dÃ©lÃ©guÃ©. Tu connais l'Ã©lÃ¨ve concernÃ©, et tu penses personnellement qu'il mÃ©rite une sanction. Mais tu sais aussi que la procÃ©dure prÃ©sente une irrÃ©gularitÃ© : il n'a pas pu s'exprimer complÃ¨tement.",
    q:"Quelle est ta posture en tant que dÃ©lÃ©guÃ© ?",
    choices:[
        { txt:"Tu te tais, car tu penses qu'il mÃ©rite d'Ãªtre sanctionnÃ© de toute faÃ§on.", ok:false, res:"Erreur. Ton rÃ´le n'est pas de juger le fond, mais de garantir la forme. Une procÃ©dure irrÃ©guliÃ¨re peut faire annuler la sanction â€” et mettre l'Ã©tablissement en difficultÃ© juridique." },
        { txt:"Tu signales l'irrÃ©gularitÃ© de procÃ©dure et demandes que l'Ã©lÃ¨ve puisse s'exprimer, sans prendre position sur la sanction.", ok:true, res:"C'est exactement ton rÃ´le. Le dÃ©lÃ©guÃ© au Conseil de Discipline est garant du respect de la procÃ©dure, pas juge du fond. Ta neutralitÃ© ici protÃ¨ge l'institution autant que l'Ã©lÃ¨ve." },
        { txt:"Tu prends la dÃ©fense de l'Ã©lÃ¨ve et argumes qu'il ne mÃ©rite pas de sanction.", ok:false, res:"Ce n'est pas ton rÃ´le non plus. Tu n'es pas son avocat. Tu garantis que la procÃ©dure est respectÃ©e â€” la dÃ©cision appartient au conseil." }
    ]
};

function App() {
    const [step, setStep] = useState("intro");
    const [name, setName] = useState("");
    const [qIdx, setQIdx] = useState(0);
    const [chosen, setChosen] = useState(null);
    const [validated, setValidated] = useState(false);
    const [score, setScore] = useState(0);
    const [scenChosen, setScenChosen] = useState(null);
    const [token, setToken] = useState("");

    function validate() { if(chosen===null)return; setValidated(true); if(chosen===quizData[qIdx].correct)setScore(s=>s+50); }
    function nextQ() { if(qIdx<quizData.length-1){setQIdx(i=>i+1);setChosen(null);setValidated(false);}else setStep("scenario"); }
    function finish() {
        const cert={v:1,d:new Date().toISOString(),m:MODULE_ID,n:name||"DÃ©lÃ©guÃ© CertifiÃ©",f:true,s:score};
        localStorage.setItem(CERT_KEY,JSON.stringify(cert));
        setToken(btoa(unescape(encodeURIComponent(JSON.stringify(cert)))));
        setStep("complete");
    }

    if(step==="intro") return e("div",{className:"card"},
        e("div",{style:{textAlign:"center"}},e("span",{className:"cert-badge"},"âš–ï¸ CERTIFICATION â€” PILIER I")),
        e("h1",null,"Droits & NeutralitÃ©"),
        e("p",{className:"intro-txt",style:{marginTop:"20px"}},"Ce module est la certification finale du Pilier Cadre. Il couvre les droits des Ã©lÃ¨ves, leurs limites, la laÃ¯citÃ© et la posture de neutralitÃ© du dÃ©lÃ©guÃ©."),
        e("p",{className:"intro-txt"},"Pour valider ce pilier, tu dois comprendre non seulement ce que tu as le droit de faire â€” mais ce que tu dois t'abstenir de faire pour rester crÃ©dible."),
        e("input",{type:"text",placeholder:"Ton nom pour le certificat...",onChange:ev=>setName(ev.target.value)}),
        e("button",{className:"btn",onClick:()=>name.trim()?setStep("lesson"):alert("Un nom pour le certificat.")},"Commencer la certification â†’")
    );

    if(step==="lesson") return e("div",{className:"card"},
        e("div",{className:"progress"},e("div",{className:"step active"},"1"),e("div",{className:"step"},"2"),e("div",{className:"step"},"3")),
        e("h2",null,"ðŸ“š Cours â€” Droits, limites et neutralitÃ©"),
        ...lessonBlocks.map((b,i)=>e("div",{key:i,className:"lesson-block"},
            e("h3",null,`${b.icon} ${b.title}`),
            e("p",null,b.body),
            b.items.length>0 && e("div",null,...b.items.map((it,j)=>e("div",{key:j,className:"droit-item"},
                e("div",{className:"droit-icon"},it.icon),
                e("div",{className:"droit-txt"},e("strong",null,it.title," : "),it.desc)
            ))),
            b.attention && e("div",{className:"attention-box"},"âš ï¸ ",b.attention)
        )),
        e("button",{className:"btn",onClick:()=>setStep("quiz")},"J'ai compris â€” Passer Ã  l'examen â–º")
    );

    if(step==="quiz") {
        const q=quizData[qIdx];
        return e("div",{className:"card"},
            e("div",{className:"progress"},e("div",{className:"step done"},"âœ“"),e("div",{className:"step active"},"2"),e("div",{className:"step"},"3")),
            e("h2",null,`ðŸ”¬ Examen â€” Question ${qIdx+1}/${quizData.length}`),
            e("div",{className:"quiz-q"},q.q),
            q.opts.map((o,i)=>{ let cls="opt"; if(validated){if(i===q.correct)cls+=" correct";else if(i===chosen)cls+=" incorrect";} return e("button",{key:i,className:cls,disabled:validated,onClick:()=>setChosen(i)},o); }),
            chosen!==null&&!validated&&e("button",{className:"btn",onClick:validate,style:{marginTop:"16px"}},"Valider"),
            validated&&e("div",{className:`feedback ${chosen===q.correct?"ok":"ko"}`},e("strong",null,chosen===q.correct?"âœ” Bonne rÃ©ponse â€” ":"âœ˜ Ã€ revoir â€” "),chosen===q.correct?q.feedback_ok:q.feedback_ko),
            validated&&e("div",{className:"nav-row"},e("button",{className:"btn-sm",onClick:nextQ},qIdx<quizData.length-1?"Question suivante â†’":"Passer au scÃ©nario final â†’"))
        );
    }

    if(step==="scenario") {
        const s=scenarioData;
        return e("div",{className:"card"},
            e("div",{className:"progress"},e("div",{className:"step done"},"âœ“"),e("div",{className:"step done"},"âœ“"),e("div",{className:"step active"},"3")),
            e("h2",null,"âš¡ Cas final de certification"),
            e("div",{className:"scenario-ctx"},s.ctx),
            e("div",{className:"scenario-q"},s.q),
            scenChosen===null?s.choices.map((c,i)=>e("button",{key:i,className:"opt",onClick:()=>setScenChosen(i)},c.txt))
            :e("div",null,
                e("div",{className:`feedback ${s.choices[scenChosen].ok?"ok":"ko"}`},e("strong",null,s.choices[scenChosen].ok?"âœ” Posture juste â€” ":"âš  Posture Ã  revoir â€” "),s.choices[scenChosen].res),
                e("button",{className:"btn",onClick:finish},"Valider ma certification â†’")
            )
        );
    }

    return e("div",{className:"card",style:{textAlign:"center"}},
        e("div",{className:"seal"},"âš–ï¸"),
        e("h1",null,"PILIER I : VALIDÃ‰"),
        e("p",{style:{margin:"16px 0",color:"var(--text-muted)"}},`${name}, tu as dÃ©montrÃ© ta maÃ®trise du cadre lÃ©gal et Ã©thique du dÃ©lÃ©guÃ©.`),
        e("div",{className:"score-row"},e("div",null,e("div",{className:"score-val"},score),e("div",{className:"score-lbl"},"Score certification"))),
        e("div",{className:"token-box"},token),
        e("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginBottom:"20px"}},"Ce code atteste de ta validation du Pilier I."),
        e("button",{className:"btn",onClick:()=>window.location.href="index PIX_DELEGUES.html"},"Retour au Hub")
    );
}
ReactDOM.createRoot(document.getElementById("root")).render(e(App));
</script>
</body></html>

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PSC1 - Module P4.05 : Synth√®se Arr√™t Cardiaque [CERTIF]</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --primary: #0066ff; --accent: #00a8ff; --dark: #0a0d1a; --darker: #050712; --glow: rgba(0, 102, 255, 0.4); --gold: #ffd700; }
        body { font-family: 'Rajdhani', sans-serif; background: linear-gradient(135deg, var(--darker) 0%, #1a1a2e 100%); color: #fff; min-height: 100vh; padding: 20px; position: relative; overflow-x: hidden; }
        .particles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none; opacity: 0.3; }
        .particle { position: absolute; width: 3px; height: 3px; background: var(--primary); border-radius: 50%; animation: float 8s infinite ease-in-out; }
        @keyframes float { 0%, 100% { transform: translateY(0) translateX(0); opacity: 0; } 50% { opacity: 1; } 100% { transform: translateY(-100vh) translateX(50px); opacity: 0; } }
        .container { max-width: 1200px; margin: 0 auto; position: relative; z-index: 1; }
        .music-controls { position: fixed; top: 20px; right: 20px; display: flex; align-items: center; gap: 10px; background: rgba(0, 0, 0, 0.6); padding: 10px 15px; border-radius: 50px; backdrop-filter: blur(10px); border: 1px solid rgba(0, 102, 255, 0.3); z-index: 1000; }
        .music-btn { background: none; border: none; font-size: 1.5em; cursor: pointer; transition: transform 0.2s ease; }
        .music-btn:hover { transform: scale(1.2); }
        .volume-slider { width: 80px; height: 5px; background: rgba(255, 255, 255, 0.2); border-radius: 5px; outline: none; -webkit-appearance: none; }
        .volume-slider::-webkit-slider-thumb { -webkit-appearance: none; width: 15px; height: 15px; background: var(--primary); border-radius: 50%; cursor: pointer; }
        header { text-align: center; margin-bottom: 40px; padding: 30px; background: rgba(255, 255, 255, 0.02); border-radius: 15px; border: 1px solid rgba(0, 102, 255, 0.3); }
        .module-badge { display: inline-block; background: linear-gradient(135deg, var(--gold), #ff8c00); color: #000; padding: 8px 20px; border-radius: 20px; font-size: 0.9em; font-weight: 700; margin-bottom: 15px; }
        h1 { font-family: 'Orbitron', monospace; font-size: 2.8em; font-weight: 900; margin-bottom: 15px; text-shadow: 0 0 20px var(--glow); }
        .subtitle { font-size: 1.3em; color: #aabbcc; margin-bottom: 20px; }
        .progress-bar { width: 100%; height: 8px; background: rgba(0, 0, 0, 0.3); border-radius: 10px; overflow: hidden; margin-top: 20px; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--primary), var(--gold)); width: 0%; transition: width 0.5s ease; }
        .section { background: rgba(255, 255, 255, 0.02); border-radius: 15px; padding: 30px; margin-bottom: 30px; border-left: 4px solid var(--primary); display: none; }
        .section.active { display: block; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .section-title { font-family: 'Orbitron', monospace; font-size: 2em; margin-bottom: 20px; color: var(--primary); display: flex; align-items: center; gap: 15px; }
        .theory-content { line-height: 1.8; font-size: 1.1em; }
        .theory-content h3 { color: var(--accent); margin: 25px 0 15px 0; font-size: 1.4em; }
        .theory-content p { margin-bottom: 15px; text-align: justify; }
        .highlight-box { background: rgba(0, 102, 255, 0.1); border-left: 3px solid var(--primary); padding: 15px; margin: 20px 0; border-radius: 5px; }
        .important-list { list-style: none; padding: 0; }
        .important-list li { padding: 10px 0 10px 30px; position: relative; }
        .important-list li::before { content: '‚ö°'; position: absolute; left: 0; }
        .comparison-table { width: 100%; border-collapse: collapse; margin: 25px 0; background: rgba(0, 0, 0, 0.3); border-radius: 10px; overflow: hidden; }
        .comparison-table th { background: rgba(0, 102, 255, 0.3); padding: 15px; text-align: left; font-weight: 700; border-bottom: 2px solid var(--primary); }
        .comparison-table td { padding: 12px 15px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
        .comparison-table tr:last-child td { border-bottom: none; }
        .question-card { background: rgba(0, 0, 0, 0.3); border-radius: 10px; padding: 25px; margin-bottom: 25px; border: 1px solid rgba(0, 102, 255, 0.3); }
        .question-text { font-size: 1.3em; margin-bottom: 20px; font-weight: 600; }
        .options { display: flex; flex-direction: column; gap: 12px; }
        .option { background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; border: 2px solid transparent; }
        .option:hover { background: rgba(0, 102, 255, 0.1); border-color: var(--primary); transform: translateX(5px); }
        .option.selected { background: rgba(0, 102, 255, 0.2); border-color: var(--accent); }
        .option.correct { background: rgba(50, 205, 50, 0.2); border-color: #32cd32; }
        .option.incorrect { background: rgba(220, 20, 60, 0.2); border-color: #dc143c; }
        .scenario-card { background: rgba(0, 0, 0, 0.4); border-radius: 10px; padding: 25px; margin-bottom: 25px; border: 1px solid var(--primary); }
        .scenario-title { font-size: 1.5em; color: var(--accent); margin-bottom: 15px; font-weight: 700; }
        .scenario-text { font-size: 1.1em; line-height: 1.7; margin-bottom: 20px; font-style: italic; }
        .btn { padding: 15px 30px; background: linear-gradient(135deg, var(--primary), var(--accent)); color: #fff; border: none; border-radius: 8px; font-size: 1.1em; font-weight: 700; cursor: pointer; transition: all 0.3s ease; font-family: 'Orbitron', monospace; }
        .btn:hover { transform: scale(1.05); box-shadow: 0 0 25px var(--glow); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .btn-secondary { background: rgba(255, 255, 255, 0.1); color: #fff; }
        .btn-group { display: flex; gap: 15px; justify-content: center; margin-top: 30px; }
        .results-panel { background: rgba(0, 0, 0, 0.4); border-radius: 15px; padding: 30px; text-align: center; border: 2px solid var(--gold); }
        .score-display { font-size: 4em; font-family: 'Orbitron', monospace; font-weight: 900; background: linear-gradient(135deg, var(--gold), var(--primary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin: 20px 0; }
        .code-display { background: rgba(0, 212, 255, 0.1); border: 2px solid #00d4ff; border-radius: 10px; padding: 20px; margin: 20px 0; font-family: 'Courier New', monospace; word-break: break-all; font-size: 0.9em; }
        .nav-buttons { position: fixed; bottom: 20px; right: 20px; display: flex; gap: 10px; z-index: 100; }
        .nav-btn { background: rgba(0, 102, 255, 0.8); padding: 12px 20px; border-radius: 25px; cursor: pointer; font-weight: 700; transition: all 0.3s ease; backdrop-filter: blur(10px); }
        .nav-btn:hover { background: var(--primary); transform: scale(1.05); }
        @media (max-width: 768px) { h1 { font-size: 2em; } .section-title { font-size: 1.5em; } .btn-group { flex-direction: column; } }
    </style>
</head>
<body>
    <audio id="bgMusic" loop><source src="music_cardiac.mp3" type="audio/mpeg"></audio>
    <div class="particles" id="particles"></div>
    <div class="music-controls">
        <button class="music-btn" id="musicToggle" onclick="toggleMusic()">üîá</button>
        <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="30" oninput="changeVolume(this.value)">
    </div>
    <div class="container">
        <header>
            <div class="module-badge">MODULE P4.05 - CERTIFICATION üèÜ</div>
            <h1>üíô SYNTH√àSE ARR√äT CARDIAQUE</h1>
            <div class="subtitle">RCP Adulte/Enfant/Nourrisson + DAE - Algorithme complet</div>
            <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
        </header>

        <div class="section active" id="section-theory">
            <div class="section-title"><span>üìö</span><span>SYNTH√àSE COMPL√àTE</span></div>
            <div class="theory-content">
                <div class="highlight-box"><strong>üéØ OBJECTIF :</strong> Ma√Ætriser TOUS les protocoles arr√™t cardiaque et l'algorithme d√©cisionnel complet.</div>

                <h3>üìä Tableau comparatif COMPLET</h3>
                <table class="comparison-table">
                    <thead>
                        <tr><th>Crit√®re</th><th>ADULTE (>8ans)</th><th>ENFANT (1-8ans)</th><th>NOURRISSON (<1an)</th></tr>
                    </thead>
                    <tbody>
                        <tr><td><strong>Reconna√Ætre</strong></td><td colspan="3">Inconscient + NE respire pas (ou gasp)</td></tr>
                        <tr><td><strong>D√©but RCP</strong></td><td>30 compressions</td><td>30 compressions</td><td><strong>5 insufflations</strong></td></tr>
                        <tr><td><strong>Cycle</strong></td><td>30:2</td><td>30:2</td><td><strong>15:2</strong></td></tr>
                        <tr><td><strong>Outil</strong></td><td>2 mains</td><td>1 ou 2 mains</td><td>2 doigts</td></tr>
                        <tr><td><strong>Position mains</strong></td><td>Centre sternum</td><td>Centre sternum</td><td>1 doigt SOUS ligne inter-mamelons</td></tr>
                        <tr><td><strong>Profondeur</strong></td><td>5-6 cm</td><td>5 cm</td><td>4 cm</td></tr>
                        <tr><td><strong>Fr√©quence</strong></td><td colspan="3">100-120 compressions/minute</td></tr>
                        <tr><td><strong>Position t√™te</strong></td><td>Bascule arri√®re</td><td>Bascule arri√®re</td><td><strong>NEUTRE</strong></td></tr>
                        <tr><td><strong>Insufflations</strong></td><td>Bouche</td><td>Bouche</td><td>Bouche+nez</td></tr>
                        <tr><td><strong>Alerte si seul</strong></td><td>Imm√©diate</td><td>5 cycles puis alerter</td><td>5 cycles puis alerter</td></tr>
                        <tr><td><strong>DAE √©lectrodes</strong></td><td>Haut droite + bas gauche</td><td>Adulte OU p√©diatrique devant/derri√®re</td><td>P√©diatrique devant/derri√®re</td></tr>
                    </tbody>
                </table>

                <h3>üîÑ Algorithme d√©cisionnel COMPLET</h3>
                <div class="highlight-box">
                    <strong>√âTAPE 1 : √âVALUATION</strong><br>
                    Victime consciente ? ‚Üí OUI = Installer confortablement, surveiller<br>
                    Victime consciente ? ‚Üí NON = Passer √âTAPE 2<br><br>

                    <strong>√âTAPE 2 : RESPIRATION</strong><br>
                    Victime respire normalement ? ‚Üí OUI = PLS (si pas traumatisme)<br>
                    Victime respire normalement ? ‚Üí NON (ou GASP) = ARR√äT CARDIAQUE ‚Üí √âTAPE 3<br><br>

                    <strong>√âTAPE 3 : IDENTIFICATION √ÇGE</strong><br>
                    √Çge victime ?<br>
                    &nbsp;&nbsp;- <strong>>8 ans</strong> = ADULTE ‚Üí RCP adulte 30:2<br>
                    &nbsp;&nbsp;- <strong>1-8 ans</strong> = ENFANT ‚Üí RCP enfant 30:2<br>
                    &nbsp;&nbsp;- <strong><1 an</strong> = NOURRISSON ‚Üí RCP nourrisson 5 insuff + 15:2<br><br>

                    <strong>√âTAPE 4 : ALERTE</strong><br>
                    Plusieurs sauveteurs ? ‚Üí OUI = Alerter IMM√âDIATEMENT pendant RCP<br>
                    Seul ? ‚Üí NON = D√©buter RCP PUIS alerter (adulte imm√©diat, enfant/nourrisson 5 cycles)<br>
                    <strong>TOUJOURS demander un DAE !</strong><br><br>

                    <strong>√âTAPE 5 : RCP + DAE</strong><br>
                    - D√©buter RCP selon √¢ge<br>
                    - D√®s DAE arrive ‚Üí Allumer, coller √©lectrodes<br>
                    - S'√©carter pour ANALYSE<br>
                    - Si choc conseill√© ‚Üí S'√©carter, choquer<br>
                    - Reprendre RCP IMM√âDIATEMENT apr√®s choc<br>
                    - Continuer jusqu'√† secours ou victime respire<br><br>

                    <strong>√âTAPE 6 : SURVEILLANCE</strong><br>
                    Si victime respire ‚Üí PLS + surveiller continuellement
                </div>

                <h3>‚ö†Ô∏è Cas complexes fr√©quents</h3>
                <div class="highlight-box">
                    <strong>CAS 1 : B√©b√© 13 mois en arr√™t</strong><br>
                    13 mois = >1 an = <strong>ENFANT</strong> ‚Üí RCP enfant 30:2 (PAS nourrisson)<br><br>

                    <strong>CAS 2 : Plusieurs victimes</strong><br>
                    Prioriser : Arr√™t cardiaque > H√©morragie > Inconscient qui respire<br>
                    Si plusieurs arr√™ts : Commencer par ENFANTS/NOURRISSONS (meilleur pronostic)<br><br>

                    <strong>CAS 3 : DAE avec enfant <8 ans</strong><br>
                    √âlectrodes p√©diatriques si disponibles (devant/derri√®re)<br>
                    Sinon : √âlectrodes adulte position normale<br><br>

                    <strong>CAS 4 : Gasp (respiration agonique)</strong><br>
                    GASP = ARR√äT CARDIAQUE ! D√©buter RCP imm√©diatement<br>
                    Ne PAS confondre avec respiration normale<br><br>

                    <strong>CAS 5 : DAE "choc non conseill√©"</strong><br>
                    Reprendre RCP IMM√âDIATEMENT<br>
                    DAE r√©analysera apr√®s 2 minutes<br><br>

                    <strong>CAS 6 : Seul avec enfant arr√™t</strong><br>
                    D√©buter RCP ‚Üí 5 cycles (~2 min) ‚Üí PUIS alerter + chercher DAE ‚Üí Reprendre RCP<br><br>

                    <strong>CAS 7 : Victime bouge pendant RCP</strong><br>
                    V√©rifier respiration<br>
                    Si respire normalement ‚Üí PLS<br>
                    Si gasp ou ne respire pas ‚Üí Continuer RCP
                </div>

                <h3>üö® Erreurs fr√©quentes √† √©viter</h3>
                <ul class="important-list">
                    <li>Confondre GASP avec respiration normale ‚Üí GASP = arr√™t !</li>
                    <li>B√©b√© 13-18 mois = ENFANT (pas nourrisson)</li>
                    <li>Oublier 5 insufflations initiales nourrisson</li>
                    <li>Toucher victime pendant analyse DAE</li>
                    <li>Ne pas reprendre RCP imm√©diatement apr√®s choc</li>
                    <li>Compressions trop peu profondes (inefficaces)</li>
                    <li>Arr√™ter RCP pour v√©rifier pouls (perte temps)</li>
                    <li>D√©brancher DAE si victime bouge</li>
                </ul>

                <h3>üîë Points cl√©s r√©vision</h3>
                <ul class="important-list">
                    <li><strong>Arr√™t cardiaque :</strong> Inconscient + Ne respire pas (ou gasp)</li>
                    <li><strong>Adulte :</strong> 30:2, 5-6 cm, 2 mains</li>
                    <li><strong>Enfant :</strong> 30:2, 5 cm, 1-2 mains selon taille</li>
                    <li><strong>Nourrisson :</strong> 5 insuff PUIS 15:2, 4 cm, 2 doigts, t√™te neutre</li>
                    <li><strong>DAE :</strong> Allumer, √©lectrodes, s'√©carter analyse/choc, reprendre RCP</li>
                    <li><strong>Si seul adulte :</strong> Alerter imm√©diat</li>
                    <li><strong>Si seul enfant/nourrisson :</strong> 5 cycles PUIS alerter</li>
                    <li><strong>GASP = ARR√äT</strong> (pas respiration normale)</li>
                </ul>

                <div class="highlight-box">
                    <strong>üèÜ VOUS MA√éTRISEZ MAINTENANT :</strong><br>
                    ‚úÖ RCP Adulte (30:2, 5-6 cm)<br>
                    ‚úÖ RCP Enfant (30:2, 5 cm, adapt√©)<br>
                    ‚úÖ RCP Nourrisson (5 insuff + 15:2, 4 cm, 2 doigts)<br>
                    ‚úÖ Utilisation DAE en s√©curit√©<br>
                    ‚úÖ Algorithme d√©cisionnel complet<br>
                    ‚úÖ Gestion cas complexes<br><br>
                    <strong>‚Üí PR√äT √Ä SAUVER DES VIES ! üíô</strong>
                </div>
            </div>
            <div class="btn-group"><button class="btn" onclick="nextSection()">QUIZ ‚û°Ô∏è</button></div>
        </div>

        <div class="section" id="section-quiz">
            <div class="section-title"><span>‚ùì</span><span>QUIZ</span></div>
            <div id="quizContainer"></div>
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="previousSection()">‚¨ÖÔ∏è</button>
                <button class="btn" id="btnValidateQuiz" onclick="validateQuiz()" disabled>VALIDER</button>
            </div>
        </div>

        <div class="section" id="section-scenarios">
            <div class="section-title"><span>üé¨</span><span>SC√âNARIOS COMPLEXES</span></div>
            <div id="scenariosContainer"></div>
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="previousSection()">‚¨ÖÔ∏è</button>
                <button class="btn" id="btnValidateScenarios" onclick="validateScenarios()" disabled>VALIDER</button>
            </div>
        </div>

        <div class="section" id="section-results">
            <div class="section-title"><span>üèÜ</span><span>R√âSULTATS & CERTIFICATION</span></div>
            <div class="results-panel">
                <h2>üìä SCORE FINAL</h2>
                <div class="score-display" id="finalScore">0/200</div>
                <div style="margin: 30px 0;">
                    <p style="font-size: 1.2em; margin-bottom: 10px;">Quiz : <span id="quizScoreDisplay">0/100</span></p>
                    <p style="font-size: 1.2em;">Sc√©narios : <span id="scenariosScoreDisplay">0/100</span></p>
                </div>
                <div id="certificationMessage"></div>
                <div class="code-display" id="codeDisplay" style="display: none;">
                    <strong>üîë CODE CERTIFICATION PILIER 4 :</strong><br>
                    <span id="certificationCode" style="font-size: 1.1em; color: #00d4ff;"></span><br><br>
                    <button class="btn" onclick="copyCode()">üìã COPIER</button>
                </div>
                <div class="btn-group" style="margin-top: 30px;">
                    <button class="btn btn-secondary" onclick="restartModule()">üîÑ</button>
                    <button class="btn" onclick="returnToHub()">üè† HUB</button>
                </div>
            </div>
        </div>
    </div>
    <div class="nav-buttons"><div class="nav-btn" onclick="returnToHub()">üè† HUB</div></div>

    <script>
        let currentSection=0,quizAnswers=[],scenarioAnswers=[],quizScore=0,scenariosScore=0;
        const music=document.getElementById('bgMusic'),musicToggle=document.getElementById('musicToggle');
        let isMusicPlaying=false;
        function toggleMusic(){if(isMusicPlaying){music.pause();musicToggle.textContent='üîá';isMusicPlaying=false}else{music.play();musicToggle.textContent='üîä';isMusicPlaying=true}}
        function changeVolume(v){music.volume=v/100}
        document.body.addEventListener('click',()=>{if(!isMusicPlaying&&music.paused){music.play();musicToggle.textContent='üîä';isMusicPlaying=true}},{once:true});

        const quizQuestions=[
            {q:"Un b√©b√© de 14 mois en arr√™t n√©cessite une RCP :",options:["Nourrisson (5 insuff + 15:2)","Enfant (30:2)","Adulte (30:2)","PLS"],correct:1,explanation:"14 mois = >1 an = ENFANT ‚Üí RCP enfant 30:2 !"},
            {q:"Le gasp (respiration agonique) signifie :",options:["Respiration normale","Arr√™t cardiaque ‚Üí RCP imm√©diate","PLS","Attendre"],correct:1,explanation:"GASP = ARR√äT CARDIAQUE ! D√©buter RCP imm√©diatement."},
            {q:"Pour un nourrisson en arr√™t, je D√âBUTE par :",options:["30 compressions","15 compressions","5 insufflations","2 insufflations"],correct:2,explanation:"Nourrisson ‚Üí D√âBUTER 5 insufflations (arr√™t souvent respiratoire)."},
            {q:"Le cycle RCP enfant est :",options:["30:2","15:2","5:1","10:2"],correct:0,explanation:"Enfant (1-8 ans) = 30:2 (comme adulte)."},
            {q:"Si je suis SEUL avec un enfant de 5 ans en arr√™t, je dois :",options:["Alerter imm√©diat","Faire 5 cycles RCP PUIS alerter","Faire 1 cycle puis alerter","Attendre"],correct:1,explanation:"Seul + enfant = 5 cycles (~2 min) RCP PUIS alerter."},
            {q:"Apr√®s un choc DAE, je dois :",options:["V√©rifier pouls","Reprendre RCP IMM√âDIATEMENT","Attendre 1 min","D√©brancher DAE"],correct:1,explanation:"Reprendre RCP 30:2 IMM√âDIATEMENT apr√®s choc !"},
            {q:"Pendant l'analyse DAE, je dois :",options:["Continuer RCP","NE PAS toucher la victime","V√©rifier respiration","Secouer"],correct:1,explanation:"NE PAS TOUCHER ! S'√©carter pendant analyse."},
            {q:"Si DAE annonce 'CHOC NON CONSEILL√â', je :",options:["D√©branch DAE","Reprends RCP imm√©diatement","Attends","V√©rifie pouls"],correct:1,explanation:"Reprendre RCP IMM√âDIATEMENT si choc non conseill√©."},
            {q:"Plusieurs victimes en arr√™t cardiaque. Je commence par :",options:["Adulte","Enfants/Nourrissons (meilleur pronostic)","Le plus proche","Personne"],correct:1,explanation:"Prioriser ENFANTS/NOURRISSONS (meilleur pronostic si RCP rapide)."},
            {q:"La profondeur compressions nourrisson est :",options:["5-6 cm","5 cm","4 cm","2 cm"],correct:2,explanation:"Nourrisson = 4 cm (environ 1/3 thorax)."}
        ];

        const scenarios=[
            {title:"Sc√©nario 1 : B√©b√© 18 mois",text:"B√©b√© 18 mois inconscient, ne respire pas. Protocole :",options:["RCP nourrisson (5 insuff + 15:2)","RCP enfant (30:2)","RCP adulte","PLS"],correct:1,explanation:"18 mois = >1 an = ENFANT ‚Üí RCP enfant 30:2 !"},
            {title:"Sc√©nario 2 : Respiration bizarre",text:"Adulte inconscient √©met des r√¢les irr√©guliers (gasp). Vous :",options:["PLS, il respire","RCP imm√©diate, c'est un arr√™t cardiaque","Attendez","V√©rifiez pouls"},correct:1,explanation:"GASP = ARR√äT CARDIAQUE ! RCP imm√©diate (ne pas confondre avec respiration normale)."},
            {title:"Sc√©nario 3 : DAE + Enfant",text:"Enfant 6 ans en arr√™t, DAE disponible sans √©lectrodes p√©diatriques. Vous :",options:["N'utilisez pas le DAE","Utilisez √©lectrodes adulte position normale","Attendez","Coupez √©lectrodes en deux"],correct:1,explanation:"Pas d'√©lectrodes enfant ? Utiliser √©lectrodes ADULTE position normale !"},
            {title:"Sc√©nario 4 : Seul + Nourrisson",text:"Vous √™tes seul avec nourrisson en arr√™t. Vous :",options:["Alertez imm√©diat","Faites 5 cycles RCP PUIS alertez","Faites 1 cycle puis alertez","Cherchez DAE d'abord"],correct:1,explanation:"Seul + nourrisson = D√©buter RCP (5 insuff + 15:2) ‚Üí 5 cycles ‚Üí PUIS alerter + DAE ‚Üí Reprendre RCP."}
        ];

        document.addEventListener('DOMContentLoaded',()=>{createParticles();generateQuiz();generateScenarios();updateProgress()});
        function createParticles(){const c=document.getElementById('particles');for(let i=0;i<30;i++){const p=document.createElement('div');p.className='particle';p.style.left=Math.random()*100+'%';p.style.animationDelay=Math.random()*8+'s';p.style.animationDuration=(Math.random()*5+5)+'s';c.appendChild(p)}}
        function generateQuiz(){const c=document.getElementById('quizContainer');quizQuestions.forEach((item,i)=>{const card=document.createElement('div');card.className='question-card';card.innerHTML=`<div class="question-text">${i+1}. ${item.q}</div><div class="options" id="options-${i}">${item.options.map((opt,j)=>`<div class="option" onclick="selectOption(${i},${j})">${opt}</div>`).join('')}</div><div id="explanation-${i}" style="display:none;margin-top:15px;padding:15px;background:rgba(0,212,255,0.1);border-radius:5px;"></div>`;c.appendChild(card)})}
        function selectOption(qi,oi){const opts=document.getElementById(`options-${qi}`).querySelectorAll('.option');opts.forEach(o=>o.classList.remove('selected'));opts[oi].classList.add('selected');quizAnswers[qi]=oi;if(quizAnswers.filter(a=>a!==undefined).length===quizQuestions.length)document.getElementById('btnValidateQuiz').disabled=false}
        function validateQuiz(){let score=0;quizQuestions.forEach((item,i)=>{const opts=document.getElementById(`options-${i}`).querySelectorAll('.option');const exp=document.getElementById(`explanation-${i}`);if(quizAnswers[i]===item.correct){score+=10;opts[quizAnswers[i]].classList.add('correct')}else{opts[quizAnswers[i]].classList.add('incorrect');opts[item.correct].classList.add('correct')}exp.innerHTML=`<strong>Explication :</strong> ${item.explanation}`;exp.style.display='block';opts.forEach(o=>o.style.pointerEvents='none')});quizScore=score;document.getElementById('btnValidateQuiz').disabled=true;setTimeout(()=>nextSection(),3000)}
        function generateScenarios(){const c=document.getElementById('scenariosContainer');scenarios.forEach((item,i)=>{const card=document.createElement('div');card.className='scenario-card';card.innerHTML=`<div class="scenario-title">${item.title}</div><div class="scenario-text">"${item.text}"</div><div class="options" id="scenario-options-${i}">${item.options.map((opt,j)=>`<div class="option" onclick="selectScenario(${i},${j})">${opt}</div>`).join('')}</div><div id="scenario-explanation-${i}" style="display:none;margin-top:15px;padding:15px;background:rgba(0,212,255,0.1);border-radius:5px;"></div>`;c.appendChild(card)})}
        function selectScenario(si,oi){const opts=document.getElementById(`scenario-options-${si}`).querySelectorAll('.option');opts.forEach(o=>o.classList.remove('selected'));opts[oi].classList.add('selected');scenarioAnswers[si]=oi;if(scenarioAnswers.filter(a=>a!==undefined).length===scenarios.length)document.getElementById('btnValidateScenarios').disabled=false}
        function validateScenarios(){let score=0;scenarios.forEach((item,i)=>{const opts=document.getElementById(`scenario-options-${i}`).querySelectorAll('.option');const exp=document.getElementById(`scenario-explanation-${i}`);if(scenarioAnswers[i]===item.correct){score+=25;opts[scenarioAnswers[i]].classList.add('correct')}else{opts[scenarioAnswers[i]].classList.add('incorrect');opts[item.correct].classList.add('correct')}exp.innerHTML=`<strong>‚úÖ Bonne r√©ponse :</strong> ${item.explanation}`;exp.style.display='block';opts.forEach(o=>o.style.pointerEvents='none')});scenariosScore=score;document.getElementById('btnValidateScenarios').disabled=true;setTimeout(()=>showResults(),3000)}
        function showResults(){nextSection();const total=quizScore+scenariosScore;document.getElementById('finalScore').textContent=total+'/200';document.getElementById('quizScoreDisplay').textContent=quizScore+'/100';document.getElementById('scenariosScoreDisplay').textContent=scenariosScore+'/100';const msg=document.getElementById('certificationMessage');const codeDiv=document.getElementById('codeDisplay');if(total>=140){msg.innerHTML=`<h3 style="color:#ffd700;">üéâ F√âLICITATIONS !</h3><p style="font-size:1.2em;margin:15px 0;">Vous avez valid√© le PILIER 4 complet !<br>üèÜ ARR√äT CARDIAQUE - CERTIFI√â</p>`;const code=btoa(JSON.stringify({v:1,d:new Date().toISOString().split('T')[0],m:'CARDIAC_SYNTH',n:'Apprenant',s:total,q:Math.round((quizScore/100)*100),sc:Math.round((scenariosScore/100)*100),f:true}));document.getElementById('certificationCode').textContent=code;codeDiv.style.display='block'}else{msg.innerHTML=`<h3 style="color:#ffa500;">‚ö†Ô∏è INSUFFISANT</h3><p style="font-size:1.1em;margin:15px 0;">Requis : 140/200<br>Score : ${total}/200</p>`}}
        function copyCode(){navigator.clipboard.writeText(document.getElementById('certificationCode').textContent);alert('‚úÖ Copi√© !')}
        function nextSection(){const s=document.querySelectorAll('.section');s[currentSection].classList.remove('active');currentSection++;s[currentSection].classList.add('active');updateProgress();window.scrollTo(0,0)}
        function previousSection(){const s=document.querySelectorAll('.section');s[currentSection].classList.remove('active');currentSection--;s[currentSection].classList.add('active');updateProgress();window.scrollTo(0,0)}
        function updateProgress(){document.getElementById('progressFill').style.width=((currentSection+1)/4)*100+'%'}
        function restartModule(){location.reload()}
        function returnToHub(){window.location.href='index_PSC1.html'}
    </script>
</body>
</html>

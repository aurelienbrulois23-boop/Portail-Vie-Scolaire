<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGORA | Module P02 - Le Verbe Haut (Prise de Parole)</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Montserrat:wght@400;700&family=Share+Tech+Mono&display=swap');

        :root {
            --agora-blue: #0f172a;
            --agora-gold: #fbbf24;
            --agora-slate: #1e293b;
            --text-primary: #f8fafc;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: var(--agora-blue);
            color: var(--text-primary);
            margin: 0; min-height: 100vh;
            display: flex; justify-content: center; align-items: center;
        }

        #root { width: 100%; max-width: 850px; padding: 20px; }

        .card {
            background: rgba(15, 23, 42, 0.95);
            border: 2px solid var(--agora-gold);
            padding: 40px; border-radius: 4px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.7);
        }

        h1, h2 { font-family: 'Playfair Display', serif; color: var(--agora-gold); text-align: center; }
        
        .btn {
            background: var(--agora-gold); color: var(--agora-blue);
            border: none; padding: 15px 30px; font-weight: bold;
            text-transform: uppercase; cursor: pointer; transition: 0.3s;
            display: block; margin: 25px auto;
        }
        .btn:hover { letter-spacing: 1px; box-shadow: 0 0 15px var(--agora-gold); }

        .option-btn {
            display: block; width: 100%; text-align: left;
            background: rgba(255,255,255,0.03); border: 1px solid var(--agora-slate);
            color: white; padding: 18px; margin: 12px 0;
            cursor: pointer; transition: 0.3s; border-radius: 2px;
        }
        .option-btn:hover { border-color: var(--agora-gold); background: rgba(251, 191, 36, 0.05); }

        .token-display {
            font-family: 'Share Tech Mono', monospace; background: #000;
            color: var(--agora-gold); padding: 15px; border: 1px dashed var(--agora-gold);
            word-break: break-all; margin: 20px 0; font-size: 0.8em;
        }

        .stress-bar { height: 10px; background: #334155; border-radius: 5px; margin: 20px 0; overflow: hidden; }
        .stress-fill { height: 100%; background: var(--agora-gold); transition: width 0.5s; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script>
        const e = React.createElement;

        function App() {
            const [step, setStep] = React.useState("intro");
            const [userName, setUserName] = React.useState("");
            const [quizIndex, setQuizIndex] = React.useState(0);
            const [token, setToken] = React.useState("");

            const MODULE_ID = "AG_P02";
            const NEXT_CERT_KEY = "CERT_PAROLE_2";

            const handleFinish = () => {
                const certData = {
                    v: 1, d: new Date().toISOString(), m: MODULE_ID,
                    n: userName || "Orateur Agora", f: true
                };
                localStorage.setItem(NEXT_CERT_KEY, JSON.stringify(certData));
                const encoded = btoa(unescape(encodeURIComponent(JSON.stringify(certData))));
                setToken(encoded);
                setStep("complete");
            };

            const renderIntro = () => e("div", { className: "card" },
                e("h1", null, "P02 : Le Verbe Haut"),
                e("p", null, "Avoir les idées, c'est bien. Les faire sortir de sa bouche sans bégayer quand 25 personnes te regardent, c'est mieux."),
                e("p", null, "Prendre la parole, c'est un sport de combat. On va bosser la posture et le souffle."),
                e("input", { 
                    type: "text", placeholder: "Ton nom d'orateur...",
                    style: { width: '100%', padding: '15px', background: '#000', border: '1px solid var(--agora-gold)', color: '#fff' },
                    onChange: (ev) => setUserName(ev.target.value)
                }),
                e("button", { className: "btn", onClick: () => userName ? setStep("quiz") : alert("Pas de nom, pas de micro !") }, "Entrer en Scène")
            );

            const questions = [
                { 
                    q: "Où doit se porter ton regard quand tu parles devant une assemblée ?", 
                    a: ["Sur tes chaussures (c'est plus sûr)", "Au plafond pour chercher l'inspiration", "Dans les yeux de ton auditoire, en balayant la salle"], 
                    c: 2 
                },
                { 
                    q: "Ton cœur s'emballe juste avant de parler. Quelle est la meilleure technique ?", 
                    a: ["Boire 3 cafés d'affilée", "Une grande inspiration profonde par le nez, et on expire lentement", "Parler très vite pour finir plus tôt"], 
                    c: 1 
                }
            ];

            const renderQuiz = () => {
                const q = questions[quizIndex];
                return e("div", { className: "card" },
                    e("h2", null, "Technique " + (quizIndex + 1)),
                    e("p", null, q.q),
                    q.a.map((opt, i) => e("button", { 
                        key: i, className: "option-btn",
                        onClick: () => {
                            if(i === q.c) {
                                if(quizIndex < questions.length - 1) setQuizIndex(quizIndex + 1);
                                else setStep("scenarios");
                            } else { alert("On dirait une bulle de savon... sois plus solide !"); }
                        }
                    }, opt))
                );
            };

            const renderScenarios = () => e("div", { className: "card" },
                e("h2", null, "Le Grand Moment"),
                e("p", null, "Tu es au Conseil d'Administration. Le Principal te demande ton avis sur le nouveau règlement. Comment commences-tu ?"),
                e("button", { className: "option-btn", onClick: handleFinish }, 
                    "'Monsieur le Principal, après avoir consulté mes camarades, voici ce qui ressort de nos échanges...'"),
                e("button", { className: "option-btn", onClick: () => alert("Trop timide ! On ne t'entend pas au fond.") }, 
                    "'Euh... ben... je sais pas trop, les autres disent que c'est nul.'"),
                e("button", { className: "option-btn", onClick: () => alert("Attention à l'agressivité, tu vas braquer tout le monde.") }, 
                    "'C'est n'importe quoi votre règlement, on n'en veut pas !'")
            );

            const renderComplete = () => e("div", { className: "card" },
                e("h1", null, "Voix de Cristal !"),
                e("p", null, "Bien joué, ", e("strong", null, userName), ". Tu as la posture. Prochaine étape : apprendre à construire des arguments qui font mouche."),
                e("div", { className: "token-display" }, token),
                e("p", { style: { fontSize: '0.8em', color: '#94a3b8' } }, "Copie ce code. C'est ton ticket pour la Certification Finale du Pilier II."),
                e("button", { className: "btn", onClick: () => window.location.href = "index PIX_DELEGUES.html" }, "Retour au Hub")
            );

            switch(step) {
                case "intro": return renderIntro();
                case "quiz": return renderQuiz();
                case "scenarios": return renderScenarios();
                case "complete": return renderComplete();
                default: return renderIntro();
            }
        }

        const root = ReactDOM.createRoot(document.getElementById("root"));
        root.render(e(App));
    </script>
</body>
</html>
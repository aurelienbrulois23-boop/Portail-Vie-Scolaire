<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGORA | Module C02 - Les Instances & Pouvoirs</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Montserrat:wght@400;600;700&family=Share+Tech+Mono&display=swap');
        :root { --agora-blue:#0f172a; --agora-gold:#fbbf24; --agora-slate:#1e293b; --agora-green:#22c55e; --agora-red:#ef4444; --text-primary:#f8fafc; --text-muted:#94a3b8; }
        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family:'Montserrat',sans-serif; background:var(--agora-blue); color:var(--text-primary); min-height:100vh; display:flex; justify-content:center; align-items:flex-start; padding:20px 0 40px; }
        #root { width:100%; max-width:860px; padding:20px; }
        .card { background:rgba(15,23,42,0.97); border:2px solid var(--agora-gold); padding:40px; border-radius:6px; box-shadow:0 10px 40px rgba(0,0,0,0.7); position:relative; overflow:hidden; }
        .card::before { content:'C02'; position:absolute; top:-15px; right:-10px; font-family:'Playfair Display'; font-size:5rem; opacity:0.04; color:var(--agora-gold); transform:rotate(-10deg); }
        h1 { font-family:'Playfair Display',serif; color:var(--agora-gold); text-align:center; font-size:1.9rem; margin-bottom:8px; }
        h2 { font-family:'Playfair Display',serif; color:var(--agora-gold); font-size:1.4rem; margin-bottom:16px; }
        .badge { display:inline-block; padding:6px 18px; border:1px solid var(--agora-gold); color:var(--agora-gold); font-family:'Share Tech Mono',monospace; font-size:0.8rem; margin-bottom:24px; }
        .progress { display:flex; gap:10px; justify-content:center; margin-bottom:28px; }
        .step { width:44px; height:44px; border:2px solid #334155; border-radius:50%; display:flex; align-items:center; justify-content:center; font-family:'Share Tech Mono',monospace; font-size:0.85rem; color:#475569; transition:all 0.3s; }
        .step.active { border-color:var(--agora-gold); color:var(--agora-gold); box-shadow:0 0 12px rgba(251,191,36,0.4); }
        .step.done { border-color:var(--agora-green); color:var(--agora-green); background:rgba(34,197,94,0.1); }
        .instance-card { border:1px solid #334155; border-radius:6px; margin-bottom:16px; overflow:hidden; }
        .instance-header { background:rgba(251,191,36,0.08); border-left:4px solid var(--agora-gold); padding:14px 18px; display:flex; align-items:center; gap:12px; }
        .instance-icon { font-size:1.4rem; }
        .instance-name { font-family:'Share Tech Mono',monospace; color:var(--agora-gold); font-size:0.9rem; text-transform:uppercase; letter-spacing:1px; }
        .instance-body { padding:16px 18px; }
        .instance-body p { line-height:1.75; color:var(--text-primary); font-size:0.95rem; margin-bottom:8px; }
        .instance-body strong { color:var(--agora-gold); }
        .instance-role { margin-top:10px; padding:10px 14px; background:rgba(34,197,94,0.06); border:1px solid rgba(34,197,94,0.3); border-radius:4px; font-size:0.88rem; color:var(--agora-green); font-style:italic; }
        .btn { background:var(--agora-gold); color:var(--agora-blue); border:none; padding:14px 32px; font-weight:700; text-transform:uppercase; cursor:pointer; transition:0.3s; display:block; margin:28px auto 0; font-family:'Montserrat',sans-serif; font-size:0.95rem; letter-spacing:1px; border-radius:2px; }
        .btn:hover { box-shadow:0 0 20px rgba(251,191,36,0.5); transform:translateY(-1px); }
        .quiz-q { font-size:1.05rem; font-weight:600; padding:16px; background:rgba(251,191,36,0.06); border-left:4px solid var(--agora-gold); border-radius:0 4px 4px 0; margin-bottom:18px; line-height:1.6; }
        .opt { display:block; width:100%; text-align:left; background:rgba(255,255,255,0.03); border:1px solid #334155; color:white; padding:16px 18px; margin:10px 0; cursor:pointer; transition:0.25s; border-radius:4px; font-family:'Montserrat',sans-serif; font-size:0.95rem; line-height:1.5; }
        .opt:hover:not(:disabled) { border-color:var(--agora-gold); background:rgba(251,191,36,0.06); transform:translateX(4px); }
        .opt.correct { border-color:var(--agora-green); background:rgba(34,197,94,0.1); }
        .opt.incorrect { border-color:var(--agora-red); background:rgba(239,68,68,0.1); }
        .opt:disabled { cursor:default; }
        .feedback { margin-top:16px; padding:14px 18px; border-radius:4px; line-height:1.65; font-size:0.93rem; }
        .feedback.ok { border-left:3px solid var(--agora-green); background:rgba(34,197,94,0.08); }
        .feedback.ko { border-left:3px solid var(--agora-red); background:rgba(239,68,68,0.08); }
        .feedback strong { color:var(--agora-gold); }
        .nav-row { display:flex; justify-content:center; gap:16px; margin-top:22px; }
        .btn-sm { background:transparent; border:2px solid var(--agora-gold); color:var(--agora-gold); padding:10px 24px; font-weight:700; text-transform:uppercase; cursor:pointer; transition:0.3s; font-family:'Montserrat',sans-serif; font-size:0.85rem; border-radius:2px; }
        .btn-sm:hover { background:rgba(251,191,36,0.1); }
        .scenario-ctx { background:rgba(251,191,36,0.05); border:1px dashed #475569; padding:14px 18px; border-radius:4px; font-style:italic; color:var(--text-muted); margin-bottom:16px; line-height:1.65; font-size:0.93rem; }
        .scenario-q { font-size:1.05rem; font-weight:600; margin-bottom:18px; line-height:1.6; }
        .token-box { background:#000; color:var(--agora-gold); font-family:'Share Tech Mono',monospace; padding:16px; border:1px dashed var(--agora-gold); word-break:break-all; margin:20px 0; font-size:0.78rem; }
        .score-row { display:flex; justify-content:center; gap:24px; margin:20px 0; flex-wrap:wrap; }
        .score-item { text-align:center; }
        .score-val { font-family:'Share Tech Mono',monospace; font-size:1.6rem; color:var(--agora-gold); }
        .score-lbl { font-size:0.75rem; color:var(--text-muted); text-transform:uppercase; letter-spacing:1px; }
        input[type=text] { width:100%; padding:13px 15px; background:#000; border:1px solid var(--agora-gold); color:#fff; font-family:'Montserrat',sans-serif; font-size:0.95rem; margin-bottom:12px; outline:none; }
        p.intro-txt { line-height:1.75; margin-bottom:14px; color:var(--text-primary); font-size:0.97rem; }
    </style>
</head>
<body><div id="root"></div>
<script>
const {useState} = React;
const e = React.createElement;
const MODULE_ID = "AG_C02";
const CERT_KEY = "CERT_CADRE_2";

const instances = [
    {
        icon:"ðŸ›",
        name:"Le Conseil d'Administration (CA)",
        desc:"C'est le 'Parlement' de l'Ã©tablissement. Il vote le budget annuel, adopte ou modifie le rÃ¨glement intÃ©rieur, et approuve les grands projets pÃ©dagogiques. Il se rÃ©unit 3 fois par an minimum.",
        members:"Qui y siÃ¨ge : le chef d'Ã©tablissement, des reprÃ©sentants des enseignants, des personnels, des parents d'Ã©lÃ¨ves, et des Ã©lÃ¨ves (2 dÃ©lÃ©guÃ©s au collÃ¨ge).",
        role:"Ton rÃ´le : voter en reprÃ©sentant la position de tes camarades, mÃªme si elle ne correspond pas Ã  la tienne. PrÃ©pare-toi en amont en sondant tes pairs sur les points Ã  l'ordre du jour."
    },
    {
        icon:"ðŸ“Š",
        name:"Le Conseil de Classe",
        desc:"Il se tient chaque trimestre pour faire le bilan de la classe : rÃ©sultats, comportement, projets d'orientation. C'est ici que les apprÃ©ciations collectives sont formulÃ©es.",
        members:"Qui y siÃ¨ge : le chef d'Ã©tablissement ou son adjoint, les professeurs de la classe, les parents dÃ©lÃ©guÃ©s, et les 2 dÃ©lÃ©guÃ©s Ã©lÃ¨ves de la classe.",
        role:"Ton rÃ´le : prÃ©parer une synthÃ¨se des remarques que tes camarades t'ont transmises (ambiance, rythme, difficultÃ©s). Tu parles en premier ou en dernier selon les Ã©tablissements â€” dans tous les cas, tu parles."
    },
    {
        icon:"ðŸŽ¯",
        name:"Le CVC (CollÃ¨ge) / CVL (LycÃ©e)",
        desc:"Le Conseil de Vie CollÃ©gienne ou LycÃ©enne est l'instance spÃ©cifiquement dÃ©diÃ©e aux Ã©lÃ¨ves. Elle traite de la vie quotidienne : amÃ©nagement des espaces, projets culturels ou sportifs, conditions de travail.",
        members:"Qui y siÃ¨ge : uniquement des Ã©lÃ¨ves Ã©lus, avec l'accompagnement du CPE et parfois du chef d'Ã©tablissement.",
        role:"Ton rÃ´le : proposer, voter, et faire remonter les projets de tes camarades. C'est l'instance oÃ¹ ton pouvoir d'initiative est le plus grand."
    },
    {
        icon:"âš ï¸",
        name:"Le Conseil de Discipline",
        desc:"Instance exceptionnelle, convoquÃ©e pour les fautes graves. Elle peut prononcer des sanctions allant jusqu'Ã  l'exclusion dÃ©finitive. Ce n'est pas une instance de routine.",
        members:"Qui y siÃ¨ge : le chef d'Ã©tablissement (prÃ©sident), des enseignants, des parents, et des dÃ©lÃ©guÃ©s Ã©lÃ¨ves. La prÃ©sence d'un dÃ©lÃ©guÃ© permet de s'assurer que l'Ã©lÃ¨ve concernÃ© est bien entendu.",
        role:"Ton rÃ´le : t'assurer que la procÃ©dure est respectÃ©e et que l'Ã©lÃ¨ve concernÃ© a pu s'expliquer. Tu n'es pas son avocat, tu es le garant du cadre."
    }
];

const quizData = [
    {
        q:"Lors d'un Conseil d'Administration, un vote porte sur l'extension des horaires d'ouverture de la cantine. Tes camarades t'ont demandÃ© de voter POUR. Personnellement, tu es CONTRE. Que fais-tu ?",
        opts:[
            "Tu votes POUR â€” tu reprÃ©sentes la position de ta classe, pas la tienne.",
            "Tu votes CONTRE â€” ta conviction vaut mieux que leur opinion.",
            "Tu t'abstiens pour ne pas trahir tes valeurs."
        ],
        correct:0,
        feedback_ok:"C'est Ã§a. Le mandat prime sur l'opinion personnelle. Tu es lÃ  pour porter une voix, pas pour substituer la tienne.",
        feedback_ko:"Voter selon sa conviction personnelle en Conseil, c'est trahir son mandat. Tu as Ã©tÃ© Ã©lu pour reprÃ©senter, pas pour dÃ©cider Ã  la place."
    },
    {
        q:"Quelle est la diffÃ©rence principale entre le Conseil de Classe et le CVC/CVL ?",
        opts:[
            "Le Conseil de Classe vote le budget, le CVC organise les sorties.",
            "Le Conseil de Classe fait le bilan pÃ©dagogique de la classe ; le CVC/CVL traite des projets et de la vie quotidienne des Ã©lÃ¨ves.",
            "Il n'y a pas de diffÃ©rence, ce sont deux noms pour la mÃªme instance."
        ],
        correct:1,
        feedback_ok:"Exact. L'un regarde en arriÃ¨re (bilan trimestre), l'autre regarde en avant (amÃ©liorer la vie Ã  l'Ã©cole). Les deux nÃ©cessitent ta prÃ©sence active.",
        feedback_ko:"Ce sont deux instances distinctes avec des missions trÃ¨s diffÃ©rentes. Les confondre, c'est arriver sans prÃ©paration dans l'une ou l'autre."
    },
    {
        q:"Au Conseil de Classe, tu n'as rien notÃ© des remarques de tes camarades avant la rÃ©union. Que fais-tu ?",
        opts:[
            "Tu improvises des avis gÃ©nÃ©raux qui semblent crÃ©dibles.",
            "Tu admets honnÃªtement que tu n'Ã©tais pas prÃ©parÃ© et tu proposes de faire une consultation rapide avant le prochain trimestre.",
            "Tu rÃ©pÃ¨tes ce que les profs viennent de dire pour paraÃ®tre en accord."
        ],
        correct:1,
        feedback_ok:"L'honnÃªtetÃ© vaut toujours mieux que l'improvisation. Les enseignants savent distinguer un dÃ©lÃ©guÃ© prÃ©parÃ© d'un dÃ©lÃ©guÃ© qui improvise.",
        feedback_ko:"Improviser ou acquiescer sans mandat rÃ©el, c'est Ãªtre prÃ©sent sans reprÃ©senter. C'est le pire scÃ©nario pour ta crÃ©dibilitÃ©."
    }
];

const scenarioData = {
    ctx:"Ton CPE t'annonce qu'une rÃ©union du CVC est prÃ©vue demain pour voter sur l'amÃ©nagement du foyer. Il te demande si tu as des propositions Ã  apporter.",
    q:"Tu n'as eu qu'une heure de prÃ©venance. Comment rÃ©agis-tu ?",
    choices:[
        { txt:"Tu dis que tu seras lÃ  demain avec quelques idÃ©es que tu vas consulter ce soir en sondant rapidement tes camarades via messagerie.", ok:true, res:"Excellent rÃ©flexe. Le dÃ©lai est court, mais tu prends quand mÃªme le temps de consulter avant de parler au nom de tes camarades. C'est l'essence du mandat." },
        { txt:"Tu y vas demain en improvisant selon ce que tu penses personnellement Ãªtre le mieux pour le foyer.", ok:false, res:"C'est exactement ce qu'il ne faut pas faire. Sans consultation prÃ©alable, tu reprÃ©sentes toi-mÃªme â€” pas tes camarades. Au CVC, ton opinion personnelle n'a pas de mandat." },
        { txt:"Tu dÃ©clares que c'est trop court comme dÃ©lai et que tu ne peux pas y aller sans prÃ©paration.", ok:false, res:"Refuser de participer n'est pas la bonne option non plus. L'idÃ©al est de sonder rapidement, mÃªme en 30 minutes. Ton absence laisse ta classe sans voix." }
    ]
};

function App() {
    const [step, setStep] = useState("intro");
    const [name, setName] = useState("");
    const [qIdx, setQIdx] = useState(0);
    const [chosen, setChosen] = useState(null);
    const [validated, setValidated] = useState(false);
    const [score, setScore] = useState(0);
    const [scenChosen, setScenChosen] = useState(null);
    const [token, setToken] = useState("");

    function validate() {
        if (chosen === null) return;
        setValidated(true);
        if (chosen === quizData[qIdx].correct) setScore(s => s + 40);
    }
    function nextQ() {
        if (qIdx < quizData.length - 1) { setQIdx(i=>i+1); setChosen(null); setValidated(false); }
        else setStep("scenario");
    }
    function finish() {
        const cert = { v:1, d:new Date().toISOString(), m:MODULE_ID, n:name||"DÃ©lÃ©guÃ©", f:true, s:score };
        localStorage.setItem(CERT_KEY, JSON.stringify(cert));
        setToken(btoa(unescape(encodeURIComponent(JSON.stringify(cert)))));
        setStep("complete");
    }

    if (step==="intro") return e("div",{className:"card"},
        e("h1",null,"Module C02"),
        e("div",{style:{textAlign:"center",marginBottom:"24px"}},e("span",{className:"badge"},"INSTANCES & POUVOIRS")),
        e("p",{className:"intro-txt"},"Un dÃ©lÃ©guÃ© qui ne connaÃ®t pas les instances de son Ã©tablissement, c'est comme un pilote qui ne connaÃ®t pas les commandes de son avion. Tu vas siÃ©ger dans des rÃ©unions avec des adultes â€” tu dois savoir de quoi on parle."),
        e("p",{className:"intro-txt"},"Ce module te donne une carte complÃ¨te du pouvoir scolaire."),
        e("input",{type:"text",placeholder:"Ton prÃ©nom...",onChange:ev=>setName(ev.target.value)}),
        e("button",{className:"btn",onClick:()=>name.trim()?setStep("lesson"):alert("Un prÃ©nom d'abord.")},name?"Commencer â†’":"Entrez votre prÃ©nom")
    );

    if (step==="lesson") return e("div",{className:"card"},
        e("div",{className:"progress"},e("div",{className:"step active"},"1"),e("div",{className:"step"},"2"),e("div",{className:"step"},"3")),
        e("h2",null,"ðŸ“š Cours â€” Les 4 instances que tu dois connaÃ®tre"),
        e("p",{className:"intro-txt",style:{marginBottom:"22px"}},"Chaque instance a un rÃ´le prÃ©cis. Ton rÃ´le dans chacune est diffÃ©rent. Apprends Ã  les distinguer."),
        ...instances.map((inst,i)=>e("div",{key:i,className:"instance-card"},
            e("div",{className:"instance-header"},
                e("div",{className:"instance-icon"},inst.icon),
                e("div",{className:"instance-name"},inst.name)
            ),
            e("div",{className:"instance-body"},
                e("p",null,inst.desc),
                e("p",null,e("strong",null,"Composition : "),inst.members),
                e("div",{className:"instance-role"},"ðŸ‘¤ ",e("strong",null,"Ton rÃ´le : "),inst.role)
            )
        )),
        e("button",{className:"btn",onClick:()=>setStep("quiz")},"J'ai compris â€” Passer au Quiz â–º")
    );

    if (step==="quiz") {
        const q = quizData[qIdx];
        return e("div",{className:"card"},
            e("div",{className:"progress"},e("div",{className:"step done"},"âœ“"),e("div",{className:"step active"},"2"),e("div",{className:"step"},"3")),
            e("h2",null,`ðŸ”¬ Quiz â€” Question ${qIdx+1}/${quizData.length}`),
            e("div",{className:"quiz-q"},q.q),
            q.opts.map((o,i)=>{
                let cls="opt";
                if(validated){if(i===q.correct)cls+=" correct"; else if(i===chosen)cls+=" incorrect";}
                return e("button",{key:i,className:cls,disabled:validated,onClick:()=>setChosen(i)},o);
            }),
            chosen!==null&&!validated&&e("button",{className:"btn",onClick:validate,style:{marginTop:"16px"}},"Valider"),
            validated&&e("div",{className:`feedback ${chosen===q.correct?"ok":"ko"}`},
                e("strong",null,chosen===q.correct?"âœ” Bonne rÃ©ponse â€” ":"âœ˜ Pas tout Ã  fait â€” "),
                chosen===q.correct?q.feedback_ok:q.feedback_ko
            ),
            validated&&e("div",{className:"nav-row"},e("button",{className:"btn-sm",onClick:nextQ},qIdx<quizData.length-1?"Question suivante â†’":"Passer au scÃ©nario â†’"))
        );
    }

    if (step==="scenario") {
        const s = scenarioData;
        return e("div",{className:"card"},
            e("div",{className:"progress"},e("div",{className:"step done"},"âœ“"),e("div",{className:"step done"},"âœ“"),e("div",{className:"step active"},"3")),
            e("h2",null,"âš¡ Mise en situation"),
            e("div",{className:"scenario-ctx"},s.ctx),
            e("div",{className:"scenario-q"},s.q),
            scenChosen===null?s.choices.map((c,i)=>e("button",{key:i,className:"opt",onClick:()=>setScenChosen(i)},c.txt))
            :e("div",null,
                e("div",{className:`feedback ${s.choices[scenChosen].ok?"ok":"ko"}`},
                    e("strong",null,s.choices[scenChosen].ok?"âœ” Bonne approche â€” ":"âš  Ã€ revoir â€” "),
                    s.choices[scenChosen].res
                ),
                e("button",{className:"btn",onClick:finish},"Valider mon module â†’")
            )
        );
    }

    return e("div",{className:"card",style:{textAlign:"center"}},
        e("div",{style:{fontSize:"3rem",marginBottom:"16px"}},"ðŸ—º"),
        e("h1",null,"Module C02 validÃ© !"),
        e("p",{style:{margin:"16px 0",color:"var(--text-muted)"}},`Tu sais maintenant oÃ¹ se prennent les dÃ©cisions, ${name}. Ne siÃ¨ge plus jamais sans prÃ©paration.`),
        e("div",{className:"score-row"},e("div",{className:"score-item"},e("div",{className:"score-val"},score),e("div",{className:"score-lbl"},"Points Quiz"))),
        e("div",{className:"token-box"},token),
        e("p",{style:{fontSize:"0.8rem",color:"var(--text-muted)",marginBottom:"20px"}},"Copie ce code pour le Hub."),
        e("button",{className:"btn",onClick:()=>window.location.href="index PIX_DELEGUES.html"},"Retour au Hub")
    );
}
ReactDOM.createRoot(document.getElementById("root")).render(e(App));
</script>
</body></html>

<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>FRATERNIT√â | FRA_DIS04 ‚Äî √ätre alli√©¬∑e : agir contre les discriminations</title>
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Montserrat:wght@400;600;700&family=Share+Tech+Mono&display=swap');
:root{--bg:#0a0804;--acc:#8b5cf6;--acc-d:#6d28d9;--text:#fdf6e8;--muted:#9d8060;--border:#2a1a08;--gold:#ffd700}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Montserrat',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;display:flex;justify-content:center;align-items:flex-start;padding:32px 16px 60px}
body::before{content:'';position:fixed;inset:0;pointer-events:none;z-index:0;background:radial-gradient(ellipse at 50% 0%,rgba(139,92,246,0.12) 0%,transparent 55%)}
#root{width:100%;max-width:820px;position:relative;z-index:1}
.card{background:rgba(10,8,4,0.93);border:2px solid var(--acc);padding:36px 40px;border-radius:6px;box-shadow:0 0 50px rgba(0,0,0,0.7);backdrop-filter:blur(10px);position:relative;overflow:hidden}
.card::before{content:'FRATERNIT√â';position:absolute;top:-20px;right:-10px;font-family:'Playfair Display';font-size:4.5rem;opacity:0.04;transform:rotate(-12deg);color:var(--acc);pointer-events:none}
.card.gold{border-color:var(--gold);box-shadow:0 0 60px rgba(255,215,0,0.15)}
.card.gold::before{color:var(--gold)}
h1,h2{font-family:'Playfair Display',serif;color:var(--acc);text-align:center;margin-bottom:14px}
h1{font-size:1.55rem}h2{font-size:1.2rem}
.gold h1{color:var(--gold)}
p{line-height:1.75;margin-bottom:12px;color:#e8d8c0}
.quote{font-style:italic;color:var(--muted);border-left:3px solid var(--acc);padding-left:14px;margin-bottom:18px;line-height:1.7}
.tag{font-size:0.65rem;color:var(--muted);text-transform:uppercase;letter-spacing:1.5px;font-family:'Share Tech Mono',monospace;margin-bottom:12px;text-align:center}
.cert-tag{font-size:0.65rem;color:var(--gold);text-transform:uppercase;letter-spacing:1.5px;font-family:'Share Tech Mono',monospace;margin-bottom:8px;text-align:center}
.xp-badge{display:inline-flex;align-items:center;gap:6px;background:rgba(255,215,0,0.12);border:1px solid rgba(255,215,0,0.4);padding:4px 12px;border-radius:20px;font-size:0.7rem;color:#ffd700;font-family:'Share Tech Mono',monospace}
.player-chip{display:inline-flex;align-items:center;gap:6px;background:rgba(255,255,255,0.04);border:1px solid var(--border);padding:4px 12px;border-radius:20px;font-size:0.68rem;color:var(--muted);font-family:'Share Tech Mono',monospace}
.btn{background:var(--acc);color:#fff;border:none;padding:13px 28px;font-weight:700;text-transform:uppercase;letter-spacing:.5px;cursor:pointer;transition:.25s;display:block;margin:18px auto 0;border-radius:4px;font-family:'Montserrat',sans-serif}
.btn:hover{filter:brightness(1.15);transform:translateY(-2px)}
.btn.gold-btn{background:linear-gradient(135deg,#b8860b,var(--gold));color:#000}
.progress{height:3px;background:rgba(255,255,255,0.07);margin-bottom:24px;border-radius:2px;overflow:hidden}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--acc-d),var(--acc));border-radius:2px;transition:width .5s ease}
.step-tag{font-family:'Share Tech Mono',monospace;font-size:0.62rem;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:10px}
.opt{display:block;width:100%;text-align:left;background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.1);color:var(--text);padding:16px 18px;margin:10px 0;cursor:pointer;transition:.22s;border-radius:4px;font-size:0.88rem;line-height:1.5;font-family:'Montserrat',sans-serif}
.opt:hover{background:rgba(255,255,255,0.09);border-color:var(--acc)}
.summary-box{background:rgba(255,255,255,0.03);border-left:3px solid var(--acc);padding:16px 18px;margin:16px 0;line-height:1.75}
.summary-box p{margin-bottom:8px;font-size:0.85rem;color:#c8b89a}
.token-box{background:#000;color:var(--gold);font-family:'Share Tech Mono',monospace;padding:16px;border:1px dashed var(--gold);word-break:break-all;margin:18px 0;font-size:0.8rem;border-radius:3px;cursor:text;user-select:all;line-height:1.6}
.token-note{font-size:0.72rem;color:var(--muted);line-height:1.65;margin-top:4px}
.seal{text-align:center;font-size:3.5rem;margin:18px 0}
.nav-back{background:rgba(255,255,255,0.05);border:1px solid var(--border);color:var(--muted);padding:6px 12px;cursor:pointer;border-radius:3px;font-size:0.7rem;font-family:'Montserrat',sans-serif;font-weight:600;transition:.2s;margin-bottom:18px}
.nav-back:hover{background:rgba(255,255,255,0.09);color:#fff}
.top-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
.ally-card{background:rgba(139,92,246,0.08);border:1px solid rgba(139,92,246,0.3);padding:14px 16px;border-radius:4px;margin:10px 0;font-size:0.85rem;line-height:1.65;color:#d8c8f0}
</style></head>
<body><div id="root"></div>
<script>
const e = React.createElement;
const MODULE_ID = 'FRA_DIS04';
const CERT_KEY  = 'CERT_FRATERNITE_DIS4';
const BACK_URL  = 'index_PIX_FRATERNITE.html';
const CERT_KEYS = ["CERT_FRATERNITE_SOL1","CERT_FRATERNITE_SOL2","CERT_FRATERNITE_SOL3","CERT_FRATERNITE_SOL4","CERT_FRATERNITE_DIS1","CERT_FRATERNITE_DIS2","CERT_FRATERNITE_DIS3","CERT_FRATERNITE_DIS4","CERT_FRATERNITE_VIE1","CERT_FRATERNITE_VIE2","CERT_FRATERNITE_VIE3","CERT_FRATERNITE_VIE4"];

const ALLY_POSTURES = [
  {icon:"üó£Ô∏è", t:"L'Interrupteur :", v:"Coupe la discrimination au moment o√π elle se produit. 'Attends, l√† c'est pas ok.' Nommer dans le moment est l'acte le plus puissant ‚Äî et le plus difficile."},
  {icon:"ü§ù", t:"L'Accompagnateur :", v:"Apr√®s un incident, v√©rifie que la personne touch√©e va bien. 'Est-ce que tu veux en parler ?' 'Je peux t'accompagner au CPE si tu veux.' Pas de pression ‚Äî mais une pr√©sence."},
  {icon:"üì£", t:"L'Amplificateur :", v:"Relaie la parole de ceux qui ont √©t√© ignor√©s ou coup√©s. 'Comme Amina le disait...' Visible dans les r√©unions de classe, les conseils de d√©l√©gu√©s."},
  {icon:"üß†", t:"L'√âducateur :", v:"Partage les m√©canismes (st√©r√©otypes, biais) sans moraliser. Pas de le√ßon de morale ‚Äî une information utile. 'Tu sais ce que j'ai appris sur l'effet spectateur ?'"}
];

const QUESTIONS = [
  {
    q: "√ätre 'alli√©¬∑e' d'une personne discrimin√©e signifie principalement...",
    a: ["Lui parler souvent et lui montrer qu'on l'appr√©cie", "Agir depuis sa propre position de non-discrimination pour r√©duire les in√©galit√©s subies par d'autres", "Partager ses publications sur les r√©seaux sociaux", "Compatir sans n√©cessairement intervenir"],
    c: 1,
    wrong: "L'allyship (ou alli√©¬∑isme) est une posture active : utiliser le fait de ne pas appartenir au groupe discrimin√© pour intervenir plus facilement et r√©duire les co√ªts que subirait la victime en s'exprimant seule. Ce n'est pas de la sympathie ‚Äî c'est de l'action."
  },
  {
    q: "Quand on tente d'interrompre une discrimination, quelle approche est g√©n√©ralement la plus efficace ?",
    a: ["Attaquer moralement l'auteur pour qu'il comprenne sa faute", "Se concentrer sur le comportement, pas sur l'intention. 'Ce que tu dis a cet effet...' plut√¥t que 'T'es raciste'", "Attendre que l'incident soit termin√© pour en parler", "Demander l'avis du groupe pour v√©rifier si c'est vraiment une discrimination"],
    c: 1,
    wrong: "Attaquer l'identit√© ('t'es raciste') d√©clenche une r√©ponse d√©fensive qui bloque l'√©coute. Cibler le comportement et son effet ('ce mot cr√©e un climat hostile') maintient le dialogue ouvert. L'objectif est le changement ‚Äî pas la condamnation symbolique."
  },
  {
    q: "Le concept de 'charge de la preuve renvers√©e' dans le droit anti-discrimination signifie...",
    a: ["La victime doit prouver qu'elle n'a pas provoqu√© la discrimination", "D√®s que la victime pr√©sente des √©l√©ments laissant supposer une discrimination, c'est √† l'auteur suppos√© de prouver qu'il n'a pas discrimin√©", "L'auteur est pr√©sum√© innocent jusqu'√† preuve du contraire comme dans tout proc√®s", "La discrimination doit √™tre film√©e pour √™tre prouv√©e"],
    c: 1,
    wrong: "En mati√®re de discrimination, la loi fran√ßaise all√®ge le fardeau de la preuve pour la victime : elle pr√©sente des √©l√©ments laissant supposer une discrimination (CV, statistiques, t√©moignages), et c'est √† l'auteur pr√©sum√© de d√©montrer que sa d√©cision √©tait justifi√©e par un motif l√©gitime √©tranger √† toute discrimination."
  }
];

const SCENARIO = {
  title: "L'allyship au conseil de classe",
  p: "Lors d'un conseil de classe, un enseignant fait une remarque qui te semble condescendante sur l'avenir d'un √©l√®ve en lien avec son origine familiale. Les autres adultes ne r√©agissent pas. Tu es d√©l√©gu√©¬∑e. Comment agis-tu ?",
  options: [
    {
      text: "Je note mentalement la formulation exacte. En fin de conseil, je demande calmement √† l'√©quipe de r√©examiner la remarque : 'Cette formulation me semble faire une hypoth√®se sur l'avenir d'un √©l√®ve en fonction de crit√®res non scolaires ‚Äî est-ce l'intention ?' Factuel, pos√©, sans accusation. Et si rien ne change, je le rapporte au CPE.",
      ok: true,
      fb: ""
    },
    {
      text: "Je l'interromps imm√©diatement en disant que c'est raciste.",
      ok: false,
      fb: "Interrompre est bien, mais qualifier directement 'c'est raciste' dans le feu de l'action provoque souvent une fermeture d√©fensive. 'Cette formulation me pose un probl√®me' ou 'Je comprends pas ce que √ßa veut dire pour la scolarit√© de cet √©l√®ve' est souvent plus efficace pour obtenir un r√©sultat r√©el."
    },
    {
      text: "Ce n'est pas mon r√¥le de d√©l√©gu√©¬∑e de corriger un enseignant.",
      ok: false,
      fb: "Le r√¥le de d√©l√©gu√©¬∑e inclut d√©fendre les int√©r√™ts de tous les √©l√®ves ‚Äî y compris quand des remarques en conseil de classe peuvent avoir des effets discriminatoires. La voie institutionnelle (CPE) est toujours disponible si l'interpellation directe te semble disproportionn√©e."
    }
  ]
};

const SYNTHESIS = [
  {icon:"‚ö°", t:"Allyship actif :", v:"Utiliser sa position de non-discrimination pour intervenir. Ce n'est pas de la sympathie ‚Äî c'est de l'action avec des effets r√©els."},
  {icon:"üéØ", t:"Comportement, pas identit√© :", v:"'Ce que tu dis a cet effet...' plut√¥t que 'T'es...' L'objectif est le changement, pas la condamnation."},
  {icon:"‚öñÔ∏è", t:"Charge de la preuve :", v:"En droit anti-discrimination, la victime pr√©sente des √©l√©ments ‚Üí l'auteur doit prouver l'absence de discrimination."},
  {icon:"üõ°Ô∏è", t:"4 postures d'alli√©¬∑e :", v:"Interrupteur, Accompagnateur, Amplificateur, √âducateur. Chaque situation appelle une posture diff√©rente."}
];

function getPlayer(){return localStorage.getItem('pvs_current_player')||'anonyme';}
function countCerts(){let n=0;CERT_KEYS.forEach(k=>{try{if(localStorage.getItem(k))n++;}catch(ex){}});return n;}
function awardXP(){
  try{
    const raw=localStorage.getItem('pvs_bridge_events'),evts=raw?JSON.parse(raw):[];
    evts.push({id:'FRA-'+MODULE_ID+'-'+Date.now(),type:'FRATERNITE_PROGRESS',player:getPlayer(),module:MODULE_ID,cpTotal:countCerts(),label:"FRATERNIT√â : √ätre alli√©¬∑e ‚Äî agir contre les discriminations",d:new Date().toISOString()});
    if(evts.length>700)evts.splice(0,evts.length-700);
    localStorage.setItem('pvs_bridge_events',JSON.stringify(evts));
    window.dispatchEvent(new StorageEvent('storage',{key:'pvs_bridge_events'}));
  }catch(ex){}
}

function App(){
  const [step,setStep]=React.useState('intro');
  const [qIdx,setQIdx]=React.useState(0);
  const [token,setToken]=React.useState('');
  const finish=()=>{const cert={v:2,d:new Date().toISOString(),m:MODULE_ID,n:getPlayer(),f:true};localStorage.setItem(CERT_KEY,JSON.stringify(cert));awardXP();setToken(btoa(unescape(encodeURIComponent(JSON.stringify(cert)))));setStep('complete');};
  const goBack=()=>{window.location.href=BACK_URL;};
  const PlayerChip=()=>e('div',{className:'player-chip'},'üéÆ ',getPlayer());

  const renderIntro=()=>e('div',{className:'card'},
    e('div',{className:'top-row'},e('button',{className:'nav-back',onClick:goBack},'‚Üê Fraternit√©'),PlayerChip()),
    e('div',{className:'cert-tag'},'‚≠ê MODULE CERTIFICAT ‚Äî Discriminations ¬∑ 4/4'),
    e('h1',null,"√ätre alli√©¬∑e : agir contre les discriminations"),
    e('p',{className:'quote'},"¬´ Parler n'est jamais trivial ‚Äî c'est d√©j√† un acte. ¬ª ‚Äî Frantz Fanon"),
    e('p',null,"Reconna√Ætre une discrimination, c'est bien. Agir face √† elle, c'est une comp√©tence qui s'apprend. L'allyship ‚Äî le fait d'√™tre alli√©¬∑e actif¬∑ve ‚Äî ne demande pas d'h√©ro√Øsme, mais des postures concr√®tes : interrompre, accompagner, amplifier, √©duquer."),
    e('p',null,"Ce module pr√©sente les 4 postures d'alli√©¬∑e, les techniques d'intervention efficaces (sans moralisme contre-productif), et le cadre juridique qui renforce l'action."),
    e('div',{style:{marginBottom:'18px'}},ALLY_POSTURES.map((a,i)=>e('div',{key:i,className:'ally-card'},e('strong',null,a.icon+' '+a.t+' '),a.v))),
    e('div',{style:{textAlign:'center'}},e('div',{className:'xp-badge'},'‚≠ê +75 XP CERTIFICAT')),
    e('button',{className:'btn',onClick:()=>setStep('quiz')},"Devenir alli√©¬∑e")
  );

  const renderQuiz=()=>{const q=QUESTIONS[qIdx];const pct=25+Math.round((qIdx/QUESTIONS.length)*30);
    return e('div',{className:'card'},
      e('div',{className:'progress'},e('div',{className:'progress-fill',style:{width:pct+'%'}})),
      e('div',{className:'step-tag'},'Question '+(qIdx+1)+' / '+QUESTIONS.length),
      e('h2',null,q.q),
      q.a.map((opt,i)=>e('button',{key:i,className:'opt',onClick:()=>{if(i===q.c){if(qIdx<QUESTIONS.length-1)setQIdx(qIdx+1);else setStep('scenario');}else alert(q.wrong||"L'allyship a sa propre logique. R√©essaie.");}},opt))
    );
  };

  const renderScenario=()=>e('div',{className:'card'},
    e('div',{className:'progress'},e('div',{className:'progress-fill',style:{width:'70%'}})),
    e('div',{className:'step-tag'},'Mise en situation ‚Äî Conseil de classe'),
    e('h2',null,SCENARIO.title),e('p',null,SCENARIO.p),
    SCENARIO.options.map((opt,i)=>e('button',{key:i,className:'opt',onClick:()=>{if(opt.ok)setStep('synthesis');else alert(opt.fb);}},opt.text))
  );

  const renderSynthesis=()=>e('div',{className:'card'},
    e('div',{className:'progress'},e('div',{className:'progress-fill',style:{width:'88%'}})),
    e('div',{className:'step-tag'},'Synth√®se'),
    e('h2',null,"Ce qu'il faut retenir"),
    e('div',{className:'summary-box'},SYNTHESIS.map((s,i)=>e('p',{key:i},e('strong',null,s.icon+' '+s.t+' '),s.v))),
    e('button',{className:'btn gold-btn',onClick:finish},'üèÜ Obtenir le Certificat Discriminations ‚Üí')
  );

  const renderComplete=()=>e('div',{className:'card gold'},
    e('div',{className:'seal'},'üèÜ'),
    e('div',{className:'cert-tag'},'CERTIFICAT PILIER DISCRIMINATIONS'),
    e('h1',null,"Alli√©¬∑e actif¬∑ve !"),
    e('p',{style:{textAlign:'center',fontSize:'0.9rem'}},"Pilier Discriminations compl√©t√© ‚Äî de l'identification √† l'action, tu as tout le spectre."),
    e('div',{style:{textAlign:'center',margin:'8px 0'}},e('div',{className:'xp-badge'},'‚≠ê +75 XP CERTIFICAT envoy√©s au Portail')),
    e('p',{style:{textAlign:'center',color:'var(--muted)',fontSize:'.8rem',marginTop:'10px'}},'Copie le jeton ci-dessous et colle-le dans le Hub Fraternit√© si demand√©.'),
    e('div',{className:'token-box'},token),
    e('p',{className:'token-note'},'üìã S√©lectionne tout le code (clic) ‚Äî Ctrl+C / Cmd+C.'),
    e('button',{className:'btn gold-btn',onClick:goBack},'‚Üê Retour au Hub Fraternit√©')
  );

  switch(step){case 'intro':return renderIntro();case 'quiz':return renderQuiz();case 'scenario':return renderScenario();case 'synthesis':return renderSynthesis();case 'complete':return renderComplete();default:return renderIntro();}
}
ReactDOM.createRoot(document.getElementById('root')).render(e(App));
</script></body></html>
